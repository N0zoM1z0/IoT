local L0, L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11, L12, L13, L14, L15, L16, L17, L18, L19, L20, L21, L22, L23, L24
L0 = module
L1 = "xiaoqiang.util.XQCameraUtil"
L2 = package
L2 = L2.seeall
L0(L1, L2)
L0 = require
L1 = "luci.http.protocol"
L0 = L0(L1)
L1 = L0.urlencode
L2 = require
L3 = "xiaoqiang.XQLog"
L2 = L2(L3)
L3 = require
L4 = "xiaoqiang.util.XQDeviceUtil"
L3 = L3(L4)
L4 = require
L5 = "xiaoqiang.common.XQFunction"
L4 = L4(L5)
L5 = require
L6 = "xiaoqiang.util.XQHttpUtil"
L5 = L5(L6)
L6 = require
L7 = "json"
L6 = L6(L7)
L7 = require
L8 = "luci.util"
L7 = L7(L8)
L8 = require
L9 = "luci.fs"
L8 = L8(L9)
L9 = "/\230\145\132\229\131\143\230\156\186\231\155\145\230\142\167\232\167\134\233\162\145"
L10 = "http://%s/sd/record/"
L11 = "http://%s/sd/record_sub/"
L12 = L10
function L13()
  local L0, L1
  L0 = _UPVALUE1_
  _UPVALUE0_ = L0
end
set_ANTS_HTTP_BASE_MAIN = L13
function L13()
  local L0, L1
  L0 = _UPVALUE1_
  _UPVALUE0_ = L0
end
set_ANTS_HTTP_BASE_SUB = L13
L13 = L4.nvramGet
L14 = "model"
L13 = L13(L14)
L14 = require
L15 = "luci.model.uci"
L14 = L14(L15)
L15 = "record_camera"
L16 = "/tmp/crontab_record_camera.lua.FILE"
L17 = {}
L17.enable = "no"
L17.hd = "yes"
L17.days = 7
L18 = L14.cursor
L18 = L18()
L20 = L18
L19 = L18.get
L21 = "misc"
L22 = "hardware"
L23 = "camera"
L19 = L19(L20, L21, L22, L23)
function L20(A0)
  local L1, L2, L3, L4, L5
  L1 = "/bin/chmod 777 %s"
  L2 = _UPVALUE0_
  L2 = L2.exec
  L4 = L1
  L3 = L1.format
  L5 = A0
  L3, L4, L5 = L3(L4, L5)
  L2(L3, L4, L5)
end
chmod777 = L20
function L20(A0)
  local L1, L2, L3, L4, L5
  L1 = "/bin/chmod -R 777 %s"
  L2 = _UPVALUE0_
  L2 = L2.exec
  L4 = L1
  L3 = L1.format
  L5 = A0
  L3, L4, L5 = L3(L4, L5)
  L2(L3, L4, L5)
end
chmod777R = L20
function L20(A0)
  local L1
  _UPVALUE0_ = A0
end
set_base = L20
function L20()
  local L0, L1, L2, L3, L4
  L0 = _UPVALUE1_
  L1 = L0
  L0 = L0.get
  L2 = "misc"
  L3 = "hardware"
  L4 = "camera"
  L0 = L0(L1, L2, L3, L4)
  _UPVALUE0_ = L0
end
reset_base = L20
L20 = ""
function L21(A0)
  local L1
  _UPVALUE0_ = A0
end
set_token = L21
function L21(A0)
  local L1
  L1 = ""
  _UPVALUE0_ = L1
end
reset_token = L21
function L21()
  local L0, L1
  L0 = _UPVALUE0_
  return L0
end
getModel = L21
function L21()
  local L0, L1, L2, L3
  L0 = _UPVALUE0_
  L0 = L0.thrift_tunnel_to_datacenter
  L1 = "{\"api\":26}"
  L0 = L0(L1)
  if L0 then
    L1 = L0.code
    if L1 == 0 then
      L1 = math
      L1 = L1.floor
      L2 = tonumber
      L3 = L0.free
      L2 = L2(L3)
      L2 = L2 / 1048576
      return L1(L2)
  end
  else
    L1 = 0
    return L1
  end
end
getCurrentDisk = L21
function L21()
  local L0, L1
  L0 = _UPVALUE0_
  L0 = L0.thrift_tunnel_to_datacenter
  L1 = "{\"api\":26}"
  L0 = L0(L1)
  if L0 then
    L1 = L0.code
    if L1 == 0 then
      return L0
  end
  else
    L1 = nil
    return L1
  end
end
getCurrentDisk1 = L21
function L21()
  local L0, L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11
  L0 = _UPVALUE0_
  L0 = L0.thrift_tunnel_to_datacenter
  L1 = "{\"api\":17}"
  L0 = L0(L1)
  L1 = ""
  L2 = 0
  if L3 == 0 then
    for L6, L7 in L3, L4, L5 do
      L8 = L7.path
      L9 = _UPVALUE1_
      if L8 == L9 then
        L8 = _UPVALUE2_
        L8 = L8.log
        L9 = 2
        L10 = "XQCameraUtil:dir ok : "
        L11 = _UPVALUE1_
        L10 = L10 .. L11
        L8(L9, L10)
        L8 = _UPVALUE1_
        return L8
      end
      L8 = tonumber
      L9 = L7.available
      L8 = L8(L9)
      if L2 < L8 then
        L1 = L7.path
        max_capa = L8
      end
    end
    _UPVALUE1_ = L1
    L6 = _UPVALUE1_
    L3(L4, L5)
  end
  L3(L4)
end
checkPathExists = L21
function L21(A0)
  local L1, L2, L3
  L2 = A0
  L1 = A0.find
  L3 = "%w+-%w+-(%w+)-?%w*"
  L1, L2, L3 = L1(L2, L3)
  uid = L3
  _ = L2
  _ = L1
  L1 = uid
  return L1
end
getUid = L21
function L21(A0)
  local L1, L2, L3
  L2 = A0
  L1 = A0.find
  L3 = "%w+-%w+-%w+-?(%w*)"
  L1, L2, L3 = L1(L2, L3)
  pwd = L3
  _ = L2
  _ = L1
  L1 = pwd
  return L1
end
getpwd = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6
  L1 = getUid
  L2 = A0
  L1 = L1(L2)
  L2 = _UPVALUE0_
  L2 = L2.access
  L3 = "/etc/config/record_camera"
  L2 = L2(L3)
  if not L2 then
    L2 = _UPVALUE0_
    L2 = L2.writefile
    L3 = "/etc/config/record_camera"
    L4 = ""
    L2(L3, L4)
  end
  L2 = _UPVALUE1_
  L3 = L2
  L2 = L2.cursor
  L2 = L2(L3)
  L4 = L2
  L3 = L2.get_all
  L5 = _UPVALUE2_
  L6 = L1
  L3 = L3(L4, L5, L6)
  if not L3 then
    L4 = _UPVALUE3_
    return L4
  else
    L4 = tonumber
    L5 = L3.days
    L4 = L4(L5)
    L3.days = L4
    return L3
  end
end
getConfig = L21
function L21(A0, A1)
  local L2, L3, L4, L5, L6, L7, L8, L9
  L2 = getUid
  L3 = A0
  L2 = L2(L3)
  L3 = _UPVALUE0_
  L4 = L3
  L3 = L3.cursor
  L3 = L3(L4)
  L5 = L3
  L4 = L3.section
  L6 = _UPVALUE1_
  L7 = "camera"
  L8 = L2
  L9 = A1
  L4(L5, L6, L7, L8, L9)
  L5 = L3
  L4 = L3.save
  L6 = _UPVALUE1_
  L4(L5, L6)
  L5 = L3
  L4 = L3.commit
  L6 = _UPVALUE1_
  L4(L5, L6)
end
setConfig = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11
  L1 = tonumber
  L2 = A0
  L1 = L1(L2)
  L1 = L1 * 24
  L1 = L1 * 60
  L1 = L1 * 60
  if L1 < 86400 then
    L1 = 86400
  end
  L2 = "/bin/date  \"+%Y-%m-%d %H:%M\" -D %s -d $(( $(/bin/date +%s) - "
  L3 = L1
  L4 = " )) "
  L2 = L2 .. L3 .. L4
  L3 = _UPVALUE0_
  L3 = L3.exec
  L4 = L2
  L3 = L3(L4)
  L4 = {}
  L6 = L3
  L5 = L3.find
  L7 = "(%d+)-(%d+)-(%d+)%s+(%d+):(%d+)"
  L5, L6, L7, L8, L9, L10, L11 = L5(L6, L7)
  L4.min = L11
  L4.hour = L10
  L4.day = L9
  L4.month = L8
  L4.year = L7
  _ = L6
  _ = L5
  L4.sec = "00"
  return L4
end
getDay = L21
function L21()
  local L0, L1, L2, L3, L4
  L0 = _UPVALUE0_
  L0 = L0.readfile
  L1 = "/proc/self/stat"
  L0 = L0(L1)
  L1 = ""
  if L0 then
    L3 = L0
    L2 = L0.find
    L4 = "^(%d+)%s.+"
    L2, L3, L4 = L2(L3, L4)
    L1 = L4
    _ = L3
    _ = L2
  end
  return L1
end
getCurrentPID = L21
function L21(A0)
  local L1, L2, L3, L4
  L1 = _UPVALUE0_
  L1 = L1.readfile
  L2 = "/tmp/record_camera_"
  L3 = A0
  L4 = ".PID"
  L2 = L2 .. L3 .. L4
  L1 = L1(L2)
  if L1 then
    L2 = _UPVALUE0_
    L2 = L2.access
    L3 = "/proc/"
    L4 = L1
    L3 = L3 .. L4
    return L2(L3)
  end
  L2 = false
  return L2
end
isRunning = L21
function L21(A0)
  local L1, L2, L3, L4, L5
  L1 = getCurrentPID
  L1 = L1()
  if L1 then
    L2 = _UPVALUE0_
    L2 = L2.writefile
    L3 = "/tmp/record_camera_"
    L4 = A0
    L5 = ".PID"
    L3 = L3 .. L4 .. L5
    L4 = L1
    L2(L3, L4)
  end
end
writePID = L21
function L21()
  local L0, L1, L2, L3, L4, L5, L6, L7, L8, L9
  L0 = {}
  L1 = _UPVALUE0_
  L1 = L1.getDeviceList
  L1 = L1(L2, L3)
  for L5, L6 in L2, L3, L4 do
    L7 = L6.ptype
    if L7 == 6 then
      L7 = table
      L7 = L7.insert
      L8 = L0
      L9 = L6
      L7(L8, L9)
    end
  end
  return L0
end
getAntsCams = L21
function L21(A0, A1)
  local L2, L3, L4, L5, L6, L7, L8, L9, L10, L11, L12, L13, L14, L15, L16, L17, L18, L19, L20, L21, L22, L23, L24, L25
  L2 = {}
  L3 = _UPVALUE0_
  L4 = L3
  L3 = L3.format
  L5 = A0.ip
  L3 = L3(L4, L5)
  L4 = _UPVALUE1_
  L4 = L4.httpGetRequest
  L5 = L3
  L5 = L5 .. L6 .. L7
  L4 = L4(L5)
  L5 = L4.code
  if L5 == 200 then
    L5 = string
    L5 = L5.gmatch
    L5 = L5(L6, L7)
    for L9 in L6, L7, L8 do
      L11 = L9
      L10 = L9.find
      L12 = "(%d+)Y(%d+)M(%d+)D(%d+)H"
      L10, L11, L12, L13 = L10(L11, L12)
      hh = L15
      dd = L14
      mm = L13
      yy = L12
      _ = L11
      _ = L10
      L10 = yy
      L11 = mm
      L12 = dd
      L13 = hh
      L10 = L10 .. L11 .. L12 .. L13
      L11 = A1.year
      L12 = A1.month
      L13 = A1.day
      L11 = L11 .. L12 .. L13 .. L14
      if L10 > L11 then
        L12 = _UPVALUE1_
        L12 = L12.httpGetRequest
        L13 = L3
        L17 = getpwd
        L18 = A0.origin_name
        L17 = L17(L18)
        L13 = L13 .. L14 .. L15 .. L16 .. L17
        L12 = L12(L13)
        L13 = L12.code
        if L13 == 200 then
          L13 = string
          L13 = L13.gmatch
          L13 = L13(L14, L15)
          for L17 in L14, L15, L16 do
            L18 = {}
            L20 = L9
            L19 = L9.find
            L21 = "(%d+)Y(%d+)M(%d+)D(%d+)H"
            L19, L20, L21, L22, L23, L24 = L19(L20, L21)
            L18.hour = L24
            L18.day = L23
            L18.month = L22
            L18.year = L21
            _ = L20
            _ = L19
            L20 = L17
            L19 = L17.find
            L21 = "<A HREF=\"(%d+)M(%d+)S%.mp4\".+%s+(%d+)"
            L19, L20, L21, L22, L23 = L19(L20, L21)
            L18.size = L23
            L18.sec = L22
            L18.min = L21
            _ = L20
            _ = L19
            L19 = L18.min
            if L19 then
              L19 = L18.sec
              if L19 then
                L19 = L18.size
                if L19 then
                  L19 = L3
                  L20 = L9
                  L21 = "/"
                  L22 = L18.min
                  L23 = "M"
                  L24 = L18.sec
                  L25 = "S.mp4"
                  L19 = L19 .. L20 .. L21 .. L22 .. L23 .. L24 .. L25
                  L18.url = L19
                  L19 = getpwd
                  L20 = A0.origin_name
                  L19 = L19(L20)
                  L18.pwd = L19
                  L19 = tonumber
                  L20 = L18.size
                  L19 = L19(L20)
                  L18.size = L19
                  L19 = A0.name
                  L20 = "_"
                  L21 = A0.mac
                  L22 = L21
                  L21 = L21.gsub
                  L23 = ":"
                  L24 = ""
                  L21 = L21(L22, L23, L24)
                  L19 = L19 .. L20 .. L21
                  L18.dir_name = L19
                  L19 = table
                  L19 = L19.insert
                  L20 = L2
                  L21 = L18
                  L19(L20, L21)
                end
              end
            end
          end
        end
      end
    end
  end
  return L2
end
getFilesOnCam = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9, L10
  L1 = {}
  L2 = _UPVALUE0_
  L2 = L2.dir
  L2 = L2(L3)
  if L2 then
    for L6, L7 in L3, L4, L5 do
      if L7 ~= "." and L7 ~= ".." then
        L8 = table
        L8 = L8.insert
        L9 = L1
        L10 = L7
        L8(L9, L10)
      end
    end
  end
  return L1
end
listlocaldir = L21
function L21(A0, A1, A2)
  local L3, L4, L5, L6, L7, L8, L9, L10, L11, L12, L13, L14, L15, L16, L17, L18, L19, L20, L21, L22, L23, L24, L25, L26, L27, L28, L29, L30
  L3 = listlocaldir
  L3 = L3(L4)
  if L3 then
    if 0 < L4 then
      for L7, L8 in L4, L5, L6 do
        L9 = listlocaldir
        L13 = L8
        L9 = L9(L10)
        if L9 then
          if 0 < L10 then
            for L13, L14 in L10, L11, L12 do
              L15 = listlocaldir
              L19 = L8
              L20 = "/"
              L21 = L14
              L15 = L15(L16)
              if L15 then
                if 0 < L16 then
                  for L19, L20 in L16, L17, L18 do
                    L21 = {}
                    L22 = "/"
                    L23 = A0
                    L24 = "/"
                    L25 = L8
                    L26 = "/"
                    L27 = L14
                    L28 = "/"
                    L29 = L20
                    L22 = L22 .. L23 .. L24 .. L25 .. L26 .. L27 .. L28 .. L29
                    L21.file = L22
                    L22 = L21.file
                    L23 = L22
                    L22 = L22.find
                    L24 = "/(%S+)/(%d+)\229\185\180(%d+)\230\156\136(%d+)\230\151\165/(%d+)\230\151\182/(%d+)\229\136\134(%d+)\231\167\146.mp4"
                    L22, L23, L24, L25, L26, L27, L28, L29, L30 = L22(L23, L24)
                    L21.sec = L30
                    L21.min = L29
                    L21.hour = L28
                    L21.day = L27
                    L21.month = L26
                    L21.year = L25
                    L21.dir_name = L24
                    L19 = L23
                    L19 = L22
                    L22 = _UPVALUE0_
                    L22 = L22.access
                    L23 = _UPVALUE1_
                    L24 = _UPVALUE2_
                    L25 = L21.file
                    L23 = L23 .. L24 .. L25
                    L22 = L22(L23)
                    if L22 then
                      L22 = _UPVALUE0_
                      L22 = L22.stat
                      L23 = _UPVALUE1_
                      L24 = _UPVALUE2_
                      L25 = L21.file
                      L23 = L23 .. L24 .. L25
                      L22 = L22(L23)
                      L23 = L22.size
                      L21.size = L23
                      L23 = A1
                      L24 = L21
                      L25 = A2
                      L23(L24, L25)
                    end
                  end
              end
              else
                L19 = "/"
                L20 = A0
                L21 = "/"
                L22 = L8
                L23 = "/"
                L24 = L14
                L16(L17)
                L19 = "/"
                L20 = A0
                L21 = "/"
                L22 = L8
                L23 = "/"
                L24 = L14
                L16(L17, L18)
              end
            end
        end
        else
          L13 = "/"
          L14 = A0
          L15 = "/"
          L10(L11)
          L13 = "/"
          L14 = A0
          L15 = "/"
          L10(L11, L12)
        end
      end
    end
  end
end
walkCamFilesOnRouter = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11, L12
  L1 = "%s%s/%s/%s\229\185\180%s\230\156\136%s\230\151\165/%s\230\151\182/%s\229\136\134%s\231\167\146.mp4"
  L3 = L1
  L2 = L1.format
  L4 = _UPVALUE0_
  L5 = _UPVALUE1_
  L6 = A0.dir_name
  L7 = A0.year
  L8 = A0.month
  L9 = A0.day
  L10 = A0.hour
  L11 = A0.min
  L12 = A0.sec
  L2 = L2(L3, L4, L5, L6, L7, L8, L9, L10, L11, L12)
  L3 = _UPVALUE2_
  L3 = L3.access
  L4 = L2
  L3 = L3(L4)
  if L3 then
    L3 = _UPVALUE2_
    L3 = L3.stat
    L4 = L2
    L3 = L3(L4)
    L4 = A0.size
    L5 = L3.size
    if L4 == L5 then
      L4 = _UPVALUE3_
      L4 = L4.log
      L5 = 2
      L6 = "XQCameraUtil:already download: "
      L7 = L2
      L6 = L6 .. L7
      L4(L5, L6)
      L4 = true
      return L4
    end
  end
  L3 = false
  return L3
end
hasFile = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9
  L1 = {}
  for L5, L6 in L2, L3, L4 do
    L7 = hasFile
    L8 = L6
    L7 = L7(L8)
    if not L7 then
      L7 = table
      L7 = L7.insert
      L8 = L1
      L9 = L6
      L7(L8, L9)
    end
  end
  return L1
end
mergeFiles = L21
function L21(A0, A1)
  local L2, L3, L4, L5, L6, L7
  L2 = A0.year
  if L2 then
    L2 = A0.month
    if L2 then
      L2 = A0.day
      if L2 then
        L2 = A0.hour
        if L2 then
          L2 = A0.year
          L3 = A0.month
          L4 = A0.day
          L5 = A0.hour
          L2 = L2 .. L3 .. L4 .. L5
          L3 = A1.year
          L4 = A1.month
          L5 = A1.day
          L6 = A1.hour
          L3 = L3 .. L4 .. L5 .. L6
          if L2 < L3 then
            L4 = _UPVALUE0_
            L4 = L4.log
            L5 = 2
            L6 = "XQCameraUtil:delete: "
            L7 = A0.file
            L6 = L6 .. L7
            L4(L5, L6)
            L4 = _UPVALUE1_
            L4 = L4.unlink
            L5 = _UPVALUE2_
            L6 = _UPVALUE3_
            L7 = A0.file
            L5 = L5 .. L6 .. L7
            L4(L5)
          end
        end
      end
    end
  end
end
_fnDoDelete = L21
function L21(A0, A1)
  local L2, L3, L4, L5
  L2 = walkCamFilesOnRouter
  L3 = A0
  L4 = _fnDoDelete
  L5 = A1
  L2(L3, L4, L5)
end
doDelete = L21
function L21(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11, L12, L13, L14
  L1 = "/usr/bin/curl '%s' -o '%s' --create-dirs --connect-timeout 3 -sS"
  L2 = "%s%s/%s/%s\229\185\180%s\230\156\136%s\230\151\165/%s\230\151\182/%s\229\136\134%s\231\167\146.mp4"
  L4 = L2
  L3 = L2.format
  L5 = _UPVALUE0_
  L6 = _UPVALUE1_
  L7 = A0.dir_name
  L8 = A0.year
  L9 = A0.month
  L10 = A0.day
  L11 = A0.hour
  L12 = A0.min
  L13 = A0.sec
  L3 = L3(L4, L5, L6, L7, L8, L9, L10, L11, L12, L13)
  L4 = _UPVALUE2_
  L4 = L4.log
  L5 = 2
  L6 = "XQCameraUtil:downloading: "
  L7 = A0.url
  L8 = "?pwd="
  L9 = "******"
  L10 = " to "
  L11 = L3
  L6 = L6 .. L7 .. L8 .. L9 .. L10 .. L11
  L4(L5, L6)
  L4 = string
  L4 = L4.find
  L5 = A0.url
  L6 = "'"
  L4 = L4(L5, L6)
  if not L4 then
    L4 = string
    L4 = L4.find
    L5 = A0.pwd
    L6 = "'"
    L4 = L4(L5, L6)
    if not L4 then
      L4 = string
      L4 = L4.find
      L5 = L3
      L6 = "'"
      L4 = L4(L5, L6)
      if not L4 then
        goto lbl_47
      end
    end
  end
  do return end
  ::lbl_47::
  L4 = _UPVALUE3_
  L4 = L4.exec
  L6 = L1
  L5 = L1.format
  L7 = A0.url
  L8 = "?pwd="
  L9 = A0.pwd
  L7 = L7 .. L8 .. L9
  L8 = L3
  L5, L6, L7, L8, L9, L10, L11, L12, L13, L14 = L5(L6, L7, L8)
  L4(L5, L6, L7, L8, L9, L10, L11, L12, L13, L14)
  L4 = _UPVALUE4_
  L4 = L4.access
  L5 = L3
  L4 = L4(L5)
  if L4 then
    L4 = _UPVALUE4_
    L4 = L4.stat
    L5 = L3
    L4 = L4(L5)
    L5 = A0.size
    L6 = L4.size
    if L5 ~= L6 then
      L5 = _UPVALUE2_
      L5 = L5.log
      L6 = 2
      L7 = "XQCameraUtil:download error: expect "
      L8 = A0.size
      L9 = " ,got "
      L10 = L4.size
      L7 = L7 .. L8 .. L9 .. L10
      L5(L6, L7)
      L5 = _UPVALUE4_
      L5 = L5.unlink
      L6 = L3
      L5(L6)
    else
      L5 = "%s\229\185\180%s\230\156\136%s\230\151\165%s\230\151\182%s\229\136\134"
      L6 = _UPVALUE4_
      L6 = L6.writefile
      L7 = _UPVALUE5_
      L9 = L5
      L8 = L5.format
      L10 = A0.year
      L11 = A0.month
      L12 = A0.day
      L13 = A0.hour
      L14 = A0.min
      L8, L9, L10, L11, L12, L13, L14 = L8(L9, L10, L11, L12, L13, L14)
      L6(L7, L8, L9, L10, L11, L12, L13, L14)
      L6 = chmod777
      L7 = L3
      L6(L7)
    end
  end
end
doDownload = L21
L21 = "{ \"code\" : -1 , \"msg\" : \"api not exists\" }"
L22 = "{ \"code\" : 3 , \"msg\" : \"parameter format error\" }"
L23 = "{ \"code\" : 0 , \"msg\" : \"ok\" }"
function L24(A0)
  local L1, L2, L3, L4, L5, L6, L7, L8, L9, L10, L11, L12, L13, L14, L15, L16, L17
  if not A0 then
    L1 = _UPVALUE0_
    return L1
  end
  L1 = {}
  L2 = getConfig
  L3 = A0
  L2 = L2(L3)
  L1.config = L2
  L3 = isRunning
  L4 = "main"
  L3 = L3(L4)
  if L3 then
    L1.isRunning = "yes"
  else
    L1.isRunning = "no"
  end
  L3 = getCurrentDisk1
  L3 = L3()
  if L3 ~= nil then
    L4 = math
    L4 = L4.floor
    L5 = tonumber
    L6 = L3.free
    L5 = L5(L6)
    L5 = L5 / 1048576
    L4 = L4(L5)
    L1.space = L4
    L4 = math
    L4 = L4.floor
    L5 = tonumber
    L6 = L3.capacity
    L5 = L5(L6)
    L5 = L5 / 1048576
    L4 = L4(L5)
    L1.total = L4
  end
  L1.code = 0
  L4 = _UPVALUE1_
  L4 = L4.access
  L5 = _UPVALUE2_
  L4 = L4(L5)
  if L4 then
    L4 = _UPVALUE1_
    L4 = L4.readfile
    L5 = _UPVALUE2_
    L4 = L4(L5)
    L1.file = L4
  end
  L4 = "%s%s/%s/"
  L5 = getAntsCams
  L5 = L5()
  L6 = ""
  for L10, L11 in L7, L8, L9 do
    L12 = L11.origin_name
    if L12 == A0 then
      L12 = L11.name
      L13 = "_"
      L14 = L11.mac
      L15 = L14
      L14 = L14.gsub
      L16 = ":"
      L17 = ""
      L14 = L14(L15, L16, L17)
      L6 = L12 .. L13 .. L14
    end
  end
  if L7 then
    if L7 ~= "" then
      L10 = _UPVALUE3_
      L11 = L6
      L1.path = L7
  end
  else
    L10 = _UPVALUE3_
    L11 = L6
    L1.path = L7
  end
  return L7(L8)
end
getAll = L24
function L24(A0, A1)
  local L2, L3, L4, L5
  L2 = {}
  L3 = A1.enable
  if L3 == "yes" then
    L2.enable = "yes"
  else
    L2.enable = "no"
  end
  L3 = A1.days
  if L3 then
    L3 = tonumber
    L4 = A1.days
    L3 = L3(L4)
    if 0 < L3 then
      L3 = A1.days
      L2.days = L3
  end
  else
    L2.days = 1
  end
  L3 = A1.hd
  if L3 == "yes" then
    L2.hd = "yes"
  else
    L2.hd = "no"
  end
  L3 = A1.custom_dir
  if L3 then
    L3 = A1.custom_dir
    if L3 ~= "" then
      L3 = A1.custom_dir
      L2.custom_dir = L3
    end
  end
  L3 = A1.token
  if L3 then
    L3 = A1.token
    if L3 ~= "" then
      L3 = A1.token
      L2.token = L3
    end
  end
  if A0 and A0 ~= "" then
    L3 = setConfig
    L4 = A0
    L5 = L2
    L3(L4, L5)
  end
  L3 = _UPVALUE0_
  return L3
end
setAllConfig = L24
function L24()
  local L0, L1
  L0 = _UPVALUE0_
  L0 = L0.forkExec
  L1 = "/usr/sbin/crontab_record_camera.lua"
  L0(L1)
  L0 = _UPVALUE1_
  return L0
end
runNow = L24
function L24(A0)
  local L1, L2, L3, L4
  if A0 == nil then
    L1 = _UPVALUE0_
    return L1
  end
  L1 = _UPVALUE1_
  L1 = L1.decode
  L2 = A0
  L1 = L1(L2)
  if L1 == nil then
    L2 = _UPVALUE0_
    return L2
  end
  L2 = L1.command
  if L2 == "get_all" then
    L2 = getAll
    L3 = L1.did
    return L2(L3)
  else
    L2 = L1.command
    if L2 == "set_config" then
      L2 = setAllConfig
      L3 = L1.did
      L4 = L1.config
      return L2(L3, L4)
    else
      L2 = L1.command
      if L2 == "run_backup" then
        L2 = runNow
        return L2()
      else
        L2 = _UPVALUE2_
        return L2
      end
    end
  end
end
request = L24
