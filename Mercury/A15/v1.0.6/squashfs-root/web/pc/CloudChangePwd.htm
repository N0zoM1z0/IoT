

<h1 class="cloudTitle">{%label.cloudIDChangePwd%}</h1>
<p class="cloudTip">{%label.cloudMEID%}{%label.colon%}<span id="cloudAccount"></span></p>
<p class="cloudErrTip commonErrTip"></p>
<div id="inputPwd"></div>
<li class="wzdSubBtn">
	<div id="changePwd"></div>
</li><script type="text/javascript">(function(){function e(a){var c="";switch(a){case ENONE:return cloudHistory.go(-1),showToast(label.modifySuccess),!0;case EINVACCOUNTPWDERR:d.showNote(errStr.invCloudOldPwdErr);return;case EINVACCOUNTNEWPWDERR:b.showNote(errStr.invCloudNewPwdErr);return;case EINVPASSWORDFMT:case EINVACCOUNTPWDFMT:c=appendErrCode(errStr.invCloudOldPwdFmtErr,a);break;case EINVNEWPASSWORD:c=errStr.invCloudNewPwdFmtErr;break;case EINVCLOUDERRORRESETPWDTIMEOUT:c=appendErrCode(errStr.invRequestFailTrylater,a);break;default:c=
!1==cloudErrHandle(a).result?cloudErrHandle(a).tip:appendErrCode(errStr.invRequestFail,a)}f(c);return!1}function f(a){a=$("p.cloudErrTip").html('<i class="iconfont icon-error"></i>'+a);a.css("display","table");a.css("margin-left",-(a[0].offsetWidth/2)+"px");$("p.cloudTip").css("visibility","hidden")}function h(){var a=!0;[d,b].forEach(function(c){a=c.checkAll()&&a});a&&(b.getValue()!=k.getValue()?f(label.chgPwdDif):($("p.cloudErrTip").css("display","none"),$("p.cloudTip").css("visibility","visible"),
showLoading(),cloudAccountModifyPwd(d.getValue(),b.getValue(),function(a,b,d){closeLoading(function(){a==cloudResultType.FINISH?e(parseInt(d[cloudClientStatus.fileName][cloudClientStatus.secName.modifyAccountPwd][cloudClientStatus.optName.errCode])):a==cloudResultType.ACTION_ERROR?e(b.errCode):void 0!=b&&!1==b.result&&alarmDialog.show(b.errStr)})})))}var d=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.password,position:Input.LABEL.INNER},targetId:"inputPwd",check:{blur:function(){return 6>
this.input.value.length?(this.showNote(errStr.pwdLenErrTip),!1):/^[\x21-\x7e]+$/.test(this.input.value)?!0:(this.showNote(errStr.inputEliegalChar),!1)}},props:{maxlength:"32",type:"password"}}),b=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.loginSetPwd,position:Input.LABEL.INNER},strength:{show:!0,least:6,critical:12},targetId:"inputPwd",check:{blur:function(){return 0==this.input.value.length?(this.showNote(label.chgPwdnull),!1):6>this.input.value.length?(this.showNote(label.chgPwdLess),
!1):!0},keyup:function(){return""==this.input.value?!0:/\s+/.test(this.input.value)?(this.showNote(errStr.inputPwdCharExistBlank),!1):/^[\x21-\x7e]+$/.test(this.input.value)?!0:(this.showNote(errStr.inputEliegalChar),!1)}},props:{maxlength:"32",type:"password",placeholder:label.cloudPwdPlaceHolder}}),k=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.loginPwdConf,position:Input.LABEL.INNER},targetId:"inputPwd",props:{maxlength:"32",type:"password",placeholder:label.cloudPwdConfPlaceHolder}}),
g=new Button({text:btn.save,onClick:null,type:Button.TYPE.PRIMARY,id:"changePwd"});USER_GROUP_REMOTE==$.authRltObj.group?g.setState({type:Button.TYPE.SECONDARY,onClick:null}):g.setState({type:Button.TYPE.PRIMARY,onClick:h});$("#cloudAccount").html(cloudHistory.getState("account"))})();
</script><style type="text/css">li.wzdSubBtn{margin-top:24px}</style>