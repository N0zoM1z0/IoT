

<div class="titleSwitchContainer"></div>
<ul class="wifiSetCon "></ul>
<div class="tipText contentTips"></div>
<script type="text/javascript">(function(){function w(a){var b="";switch(a){case ENONE:return!0;case EINVSSIDNULL:b=errStr.wlanSsidErr;break;case EINVSSIDLEN:b=errStr.wlanSsidLenErr;break;case EINVSSIDBLANK:b=errStr.wlanSsidBlank;break;case EWLANPWDBLANK:b=errStr.wlanPwdNull;break;case EINVPSKLEN:b=errStr.wlanPwdLenValid;break;case EINVWLANPWD:b=errStr.wlanPwdInvalid;break;case ESYSBUSY:b=errStr.invRequestFailTrylater;break;default:b=errStr.unknown+a}alarmDialog.show(b);return!1}function J(){return EINVWLANPWD==checkWlanPwd(this.input.value)?
(this.showNote(errStr.wlanWzdPwdValid),!1):!0}function D(a,b){function c(c,d,e){var x=c?a:b,h=g==d?uciWireless.optName.wifiEnable:uciWireless.dynOptName.enable;E.push({host:c,name:d,title:e,ssid:x[d][uciWireless.dynOptName.ssid],key:x[d][uciWireless.dynOptName.key],enable:x[d][h]||x[d][h]})}var d=uciWireless.dynData.host_2g,h=uciWireless.dynData.host_5g,g=uciWireless.secName.wlanBS,m=uciWireless.dynData.host_5g1,e=uciWireless.dynData.host_5g2,n=uciGuestNet.secName.wireless2G,k=uciGuestNet.secName.wireless5G,
E=[];switch(slp.bandsProvided){case slp.SINGLE:c(!0,d,label.wirelessHost);break;case slp.DOUBLE:!0==f?c(!0,g,label.wirelessHost):(c(!0,d,label.wirelessNet2G),c(!0,h,label.wirelessNet5G));break;case slp.TRIPLE:!0==f?c(!0,g,label.wirelessHost):(c(!0,d,label.wirelessNet2G),c(!0,m,label.wirelessNet5G1),c(!0,e,label.wirelessNet5G2))}1==slp.moduleSpec.guest5g?(c(!1,n,label.wirelessGuest2G),c(!1,k,label.wirelessGuest5G)):c(!1,n,label.wirelessGuest);return E}function F(){z={};var a=D(h,p),b=a.length,c=$("ul.wifiSetCon")[0],
d=3<b?"col-4":"col-3",f=d[d.length-1],g,m,e,n,k;emptyNodes(c);a.forEach(function(a,b){g=document.createElement("li");g.className="column "+d;m=document.createElement("div");m.className="switchConWrapper";g.appendChild(m);n=document.createElement("span");n.className="wifiTitle";n.innerHTML=a.title;m.appendChild(n);e=document.createElement("div");e.id="switch_"+a.name;e.className="switchCon";m.appendChild(e);k=document.createElement("i");k.className="switchBg";e.appendChild(k);k=document.createElement("i");
k.className="switchBall";e.appendChild(k);e=document.createElement("div");e.id="inputCon_"+a.name;g.appendChild(e);e=document.createElement("div");e.id="button_"+a.name;g.appendChild(e);0==b%f&&(g.style.marginLeft="0");c.appendChild(g);var q=new Input({type:Input.TYPE.PLAIN_TEXT,targetId:"inputCon_"+a.name,check:{blur:checkSsidInput},props:{maxlength:"32",value:a.ssid,type:"text"}}),r=new Input({type:Input.TYPE.CIPHER_TEXT,targetId:"inputCon_"+a.name,strength:{show:!0,least:8,critical:12},check:{blur:onPwdBlur,
keyup:J},props:{maxlength:"63",value:a.key,type:"text"}});new Button({text:btn.save,onClick:function(){function c(){g.setData({data:l,success:function(c){showToast(label.saveSuccess);e[a.name][uciWireless.dynOptName.ssid]=q.getValue();e[a.name][uciWireless.dynOptName.key]=r.getValue()},fail:function(a){void 0!=a&&void 0!=a[ERR_CODE]&&w(a[ERR_CODE])}})}var b=uciWireless.dynOptValue.encryption.on,d=uciWireless.dynOptValue.encryption.off,g,e,f,k=!1;if(q.checkAll()&&(r.disabled||r.checkAll())){a.host?
(g=slp.host,e=h,f=uciWireless.dynOptName.encryption):(g=slp.guest,e=p,f=uciGuestNet.optName.encrypt);var l={};e[a.name][uciWireless.dynOptName.ssid]!=q.getValue()&&(l[a.name]={},l[a.name][uciWireless.dynOptName.ssid]=q.getValue(),checkStrHasCN(q.getValue())&&(k=!0));e[a.name][uciWireless.dynOptName.key]!=r.getValue()&&(l[a.name]=l[a.name]||{},l[a.name][uciWireless.dynOptName.key]=r.getValue(),l[a.name][f]=0==r.getValue().length?d:b);0!=Object.keys(l).length&&(k?confirmDialog.show({content:label.confirmSsidHasCNChar,
button:{confirmStr:btn.btnY,cancelStr:btn.btnN},callback:function(a){a?q.input.select():c()}}):c())}},type:Button.TYPE.PRIMARY,id:"button_"+a.name,props:{width:"88px"}});z[a.name]=new Switch("switch_"+a.name,a.enable,function(c){var b,d,e={},g=this,f=uciWireless.secName.wlanBS==a.name?uciWireless.optName.wifiEnable:uciWireless.dynOptName.enable;a.host?(b=slp.host,d=h):(b=slp.guest,d=p);d[a.name][f]!=c&&(e[a.name]={},e[a.name][f]=c,b.setData({data:e,success:function(b){d[a.name][f]=c;s()},fail:function(a){void 0!=
a&&void 0!=a[ERR_CODE]&&w(a[ERR_CODE]);g.setState(1-c)}}))},!1)})}function K(a){var b={},c=this;b[uciWireless.dynData.wifi_switch]={};b[uciWireless.dynData.wifi_switch][uciWireless.dynOptName.enable]=a;slp.host.setData({data:b,success:function(c){A(1==a);G()},fail:function(b){void 0!=b&&void 0!=b[ERR_CODE]&&w(b[ERR_CODE]);c.setState(1-a)}})}function H(a){var b=uciWireless.secName.wlanBS,c=uciWireless.optName.bsEnable,d={},p=this;d[b]={};d[b][c]=1==a?B:I;slp.host.setData({data:d,success:function(d){h[b][c]=
1==a?B:I;f=1==a?!0:!1;F()},fail:function(c){void 0!=c&&void 0!=c[ERR_CODE]&&w(c[ERR_CODE]);p.setState(1-a)}})}function A(a){a?($(".wifiSetCon").css("display","block"),$("div.tipText").css("display","none")):($(".wifiSetCon").css("display","none"),$("div.tipText").html(label.wifiAllSwitchCloseStateTips),$("div.tipText").css("display","block"))}function s(){null!=t&&(clearTimeout(t),t=null);slp.getWiFiStatus(function(a){var b=a[uciWireless.fileName];a=D(b,a[uciGuestNet.fileName]);if(u&&(isWifiAllSwitchOpen=
b[uciWireless.dynData.wifi_switch][uciWireless.dynOptName.enable]==uciWireless.dynOptValue.enable.on,y.setState(isWifiAllSwitchOpen?1:0),A(isWifiAllSwitchOpen),!isWifiAllSwitchOpen)){t=$.setTimeout(s,2E3);return}slp.bandSteeringProvided&&null==v&&(C(label.multiBandIntegration,"bsSwitch",label.wlanBSDesc,"wifiSetCon",u?!1:!0),v=new Switch("bsSwitch",f?1:0,H,!1));a.forEach(function(a,b){(a.host?h:p)[a.name][uciWireless.secName.wlanBS==a.name?uciWireless.optName.wifiEnable:uciWireless.dynOptName.enable]=
a.enable;z[a.name].setState(a.enable)});t=$.setTimeout(s,2E3)})}function C(a,b,c,d,f){a=$('<div class="controlBar'+(d?" "+d:"")+'"><div class="switchConWrapper"><span class="switchName">'+a+'</span><div id="'+b+'"class="switchCon"><i class="switchBg"></i><i class="switchBall"/></i></div></div></div>');void 0!=c&&a.find("div.switchConWrapper").after($("<p>"+c+"</p>"));f&&a.addClass("title");$("div.titleSwitchContainer").append(a)}function G(){var a=$.Deferred(),b=$.Deferred();slp.host.getData({success:function(c){h=
c[uciWireless.fileName];a.resolve()}});slp.guest.getData({success:function(a){p=a[uciGuestNet.fileName];b.resolve()}});$.when(a,b).done(function(){var a=!0;f=null!=h[uciWireless.secName.wlanBS]&&B==h[uciWireless.secName.wlanBS][uciWireless.optName.bsEnable];if(u){if(a=h[uciWireless.dynData.wifi_switch][uciWireless.dynOptName.enable]==uciWireless.dynOptValue.enable.on,null==y?(C(label.wifiAllSwitch,"wifiAllSwitch",void 0,void 0,!0),y=new Switch("wifiAllSwitch",a?1:0,K,!1),A(a)):y.setState(a?1:0),!a){s();
return}}else $(".wifiSetCon").css("display","block");slp.bandSteeringProvided&&(null==v?(C(label.multiBandIntegration,"bsSwitch",label.wlanBSDesc,"wifiSetCon",u?!1:!0),v=new Switch("bsSwitch",f?1:0,H,!1)):v.setState(f?1:0));F();s()})}var z={},B=uciWireless.optValue.bsEnable.enable,I=uciWireless.optValue.bsEnable.disable,h,p,f,v=null,u=!1,y=null,t=null;slp.moduleSpec.wifi_switch&&1==slp.moduleSpec.wifi_switch&&(u=!0);G()})();
</script><style type="text/css">div.controlBar{margin-bottom:32px}div.controlBar.title{padding-bottom:16px;border-bottom:1px solid #e6e6e6}div.controlBar p{padding-top:8px;color:#666;font-size:13px;line-height:20px}div.switchConWrapper span.switchName{font-size:16px;font-weight:bold;color:#333;line-height:24px;vertical-align:middle;margin-right:16px}div.switchConWrapper span.wifiTitle{font-size:24px;font-weight:bold;color:#333;line-height:36px}ul.wifiSetCon{font-size:0}ul.wifiSetCon li.column{display:inline-block;vertical-align:top}li.column div.block{margin:-2px 0 18px;height:20px}ul.wifiSetCon li.column+li{margin-left:32px}ul.wifiSetCon li.col-3,li.col-3 li.inputLi{width:264px}ul.wifiSetCon li.col-4,li.col-4 li.inputLi{width:190px}ul.wifiSetCon div.switchCon{float:right;top:10px}ul.wifiSetCon div.switchConWrapper{margin-bottom:24px}.wifiSetCon div.tipText{display:none}</style>