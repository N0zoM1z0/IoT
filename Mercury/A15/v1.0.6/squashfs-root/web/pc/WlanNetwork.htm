

<div class="head">
	<div class="title"><h1>{%menuStr.wifiHost%}</h1><i class="helpBtn iconfont icon-help" helpStr="wlanNetworkHelp"></i></div>
	<p class="description">{%titleDescriptionStr.hostNetworkDescription%}</p>
	<ul class="relayErrorTip">
		<i class="iconfont icon-warn"></i>
		<span id="relayTipText"></span>
	</ul>
</div>
<div class="wifiSetCon">
	<div class="subTitle bandSteeringCon">
		<h2>{%label.multiBandIntegration%}</h2>
		<div id="bandSteeringEnableSwitch" class="switchCon">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
		<p class="description">{%titleDescriptionStr.hostNetworkBSDescription%}</p>
	</div>
	<div class="subTitle bandSteeringCon bsShow">
		<h2>{%label.wirelessNet%}</h2>
		<div id="bandSteeringSwitch" class="switchCon">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
	</div>
	<div id="bandSteeringBasicArgument" class="bandSteeringCon bsShow">
	</div>
	<div class="subTitle wifi2GCon">
		<h2 id="wifi2GTitle">{%label.wirelessNet2G%}</h2>
		<div id="wifi2GSwitch" class="switchCon bsNotShow">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
	</div>
	<div id="wifi2GBasicArgument" class="wifi2GCon">
	</div>
	<div class="subTitle wifi5GCon">
		<h2 id="wifi5GTitle">{%label.wirelessNet5G%}</h2>
		<div id="wifi5GSwitch" class="switchCon bsNotShow">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
	</div>
	<div id="wifi5GBasicArgument" class="wifi5GCon">
	</div>
	<div class="subTitle wifi5G1Con">
		<h2 id="wifi5G1Title">{%label.wirelessNet5G1%}</h2>
		<div id="wifi5G1Switch" class="switchCon bsNotShow">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
	</div>
	<div id="wifi5G1BasicArgument" class="wifi5G1Con">
	</div>
	<div class="subTitle wifi5G2Con">
		<h2 id="wifi5G2Title">{%label.wirelessNet5G2%}</h2>
		<div id="wifi5G2Switch" class="switchCon bsNotShow">
			<i class="switchBg"></i>
			<i class="switchBall"/></i>
		</div>
	</div>
	<div id="wifi5G2BasicArgument" class="wifi5G2Con">
	</div>
</div>
<div class="tipText contentTips"></div>
<div id="wpsConfigBlock" class="wpsConfigBlock">
	<div class="subTitle">
		<h2>{%label.wpsConfig%}</h2>
	</div>
	<ul class="inputCMPT medium">
		<label class="outerLbl">{%label.wpsRouterPinCode%}</label>
		<div id="wpsSwitch" class="switchCon">
			<i class="switchBg"></i>
			<i class="switchBall"></i>
		</div>
	</ul>
	<div id="pinCodeBlock" class="pinCodeBlock">
		<div>{%label.pinCodeTip%}</div>
		<div><label id="pinCode" class="pinCode"></label></div>
		<div id="refreshPinCode" class="refreshBtn">
			<i class="iconfont icon-refresh"></i><span>{%btn.refreshPinCode%}</span>
		</div>
	</div>
</div>
<script type="text/javascript">(function(){function z(a){var b="";switch(a){case ENONE:return!0;case EINVCHNAMODEBAND:b=errStr.wlanInvalidOptionWithWDSEnabled;break;case ESYSBUSY:b=errStr.invRequestFailTrylater;break;default:b=errStr.unknown+a}alarmDialog.show(b);return!1}function L(a,b,c){function d(a,c){for(var b=0,g=a.length;b<g;b++)if(a[b]===c)return b;return-1}var p=[];p.push({str:label.chanbw20,value:uciWireless.dynOptValue.bandwidth.bw20});for(var f="38 46 54 62 102 110 118 126 134 142 151 159".split(" "),e=function(a){for(var b=
{},c=0,d=a.length;c<d;c++)b[a[c]]=[(parseInt(a[c])-2).toString(),(parseInt(a[c])+2).toString()];return b}(f),h,k=0,l=f.length;k<l;k++)if(-1<d(e[f[k]],b)){h=e[f[k]];break}if(void 0!==h)for(k=0,l=h.length;k<l;k++){if(-1===d(a,h[k]))return p}else return p;if(c===uciWireless.dynOptValue.mode.m_11an)return p.unshift({str:label.wirelessAuto40,value:uciWireless.dynOptValue.bandwidth.auto}),p;c="42 58 106 122 138 155".split(" ");for(var f=function(a){for(var c={},b=0,d=a.length;b<d;b++)c[a[b]]=[(parseInt(a[b])-
6).toString(),(parseInt(a[b])-2).toString(),(parseInt(a[b])+2).toString(),(parseInt(a[b])+6).toString()];return c}(c),n,k=0,l=c.length;k<l;k++)if(-1<d(f[c[k]],b)){n=f[c[k]];break}if(void 0!==n){k=0;for(l=n.length;k<l;k++)if(-1===d(a,n[k]))return p.unshift({str:label.wirelessAuto40,value:uciWireless.dynOptValue.bandwidth.auto}),p;p.unshift({str:label.chanbw40,value:uciWireless.dynOptValue.bandwidth.bw40})}else return p.unshift({str:label.wirelessAuto40,value:uciWireless.dynOptValue.bandwidth.auto}),
p;if("undefined"!==typeof DEV_SUPPORT_160M&&!DEV_SUPPORT_160M)return p.unshift({str:label.wirelessAuto80,value:uciWireless.dynOptValue.bandwidth.auto}),p;n=["50","114"];c=function(a){for(var b={},c=0,d=a.length;c<d;c++)b[a[c]]=[(parseInt(a[c])-14).toString(),(parseInt(a[c])-10).toString(),(parseInt(a[c])-6).toString(),(parseInt(a[c])-2).toString(),(parseInt(a[c])+2).toString(),(parseInt(a[c])+6).toString(),(parseInt(a[c])+10).toString(),(parseInt(a[c])+14).toString()];return b}(n);for(var m,k=0,l=
n.length;k<l;k++)if(-1<d(c[n[k]],b)){m=c[n[k]];break}if(void 0!==m){k=0;for(l=m.length;k<l;k++)if(-1===d(a,m[k]))return p.unshift({str:label.wirelessAuto80,value:uciWireless.dynOptValue.bandwidth.auto}),p;p.unshift({str:label.chanbw80,value:uciWireless.dynOptValue.bandwidth.bw80});p.unshift({str:label.wirelessAuto160,value:uciWireless.dynOptValue.bandwidth.auto})}else p.unshift({str:label.wirelessAuto80,value:uciWireless.dynOptValue.bandwidth.auto});return p}function aa(a,b){for(var c=Object.keys(b),
d=!1,f=0;f<c.length;f++)void 0==a[c[f]]||a[c[f]]!=b[c[f]]?d=!0:delete b[c[f]];return d}function V(a,b){var c,g;for(g in f)-1<b.id.toLowerCase().indexOf(f[g].bandPostfix)&&(c=g);uciWireless.dynOptValue.auth.psk2_sae3==a||uciWireless.dynOptValue.auth.sae3==a?$("#authTips"+f[c].bandPostfix).show():$("#authTips"+f[c].bandPostfix).hide();g=c==m?$(d[h].mode).val():$(d[c].mode).val();if(slp.cipherSupport||slp["cipherSupport"+f[c].bandPostfix])uciWireless.dynOptValue.auth.psk2_sae3==a||uciWireless.dynOptValue.auth.sae3==
a||uciWireless.dynOptValue.mode.m_11n==g?(d[c].cipher.changeSel(uciWireless.dynOptValue.cipher.aes),d[c].cipher.disable(!0)):(d[c].cipher.changeSel(e[c][uciWireless.dynOptName.cipher]),d[c].cipher.disable(!1))}function Q(a){uciWireless.dynOptValue.mode.m_11b==a||uciWireless.dynOptValue.mode.m_11g==a||uciWireless.dynOptValue.mode.m_11bg==a?(d[h].bandWidth.changeSel(uciWireless.dynOptValue.bandwidth.bw20),d[h].bandWidth.disable(!0)):(d[h].bandWidth.changeSel(uciWireless.dynOptValue.bandwidth.auto),
d[h].bandWidth.disable(!1));slp.gSysModeSupport&&C==M&&d[h].bandWidth.disable(!0);if(slp.cipherSupport||slp.cipherSupport2g){var b=y?m:h,c=$(d[b].auth).val();!(!y&&(slp.authSupport||slp.authSupport2g)||y&&(slp.authSupport||slp.authSupport2g||slp.authSupport5g||slp.authSupport5g1||slp.authSupport5g4))||uciWireless.dynOptValue.auth.psk2_sae3!=c&&uciWireless.dynOptValue.auth.wpa3!=c?uciWireless.dynOptValue.mode.m_11n==a?(d[b].cipher.changeSel(uciWireless.dynOptValue.cipher.aes),d[b].cipher.disable(!0)):
(d[b].cipher.changeSel(e[b][uciWireless.dynOptName.cipher]),d[b].cipher.disable(!1)):(d[b].cipher.changeSel(uciWireless.dynOptValue.cipher.aes),d[b].cipher.disable(!0))}slp.g11AXSupport.wlan2g&&uciWireless.dynOptValue.mode.m_11bgn_ax==a?($("#modeTips"+f[h].bandPostfix).show(),(slp.muMimoSupport||slp.muMimoSupport2g)&&d[h].muMimoCon.css("display","table"),(slp.twtSupport||slp.twtSupport2g)&&d[h].twtCon.css("display","table"),(slp.ofdmaSupport||slp.ofdmaSupport2g)&&d[h].ofdmaCon.css("display","table")):
($("#modeTips"+f[h].bandPostfix).hide(),(slp.muMimoSupport||slp.muMimoSupport2g)&&d[h].muMimoCon.css("display","none"),(slp.twtSupport||slp.twtSupport2g)&&d[h].twtCon.css("display","none"),(slp.ofdmaSupport||slp.ofdmaSupport2g)&&d[h].ofdmaCon.css("display","none"))}function G(a,b){var c,g,p,e,h=[],m=!0;c=b==d[q].mode?q:b==d[t].mode?t:v;g=d[c].channel.value;p=d[c].bandWidth.value;c===q&&(e=slp.moduleSpec[uciFunction.optName.channel5g]||wifi5GChannelOptions);c===t&&(e=slp.moduleSpec[uciFunction.optName.channel5g1]||
wifi5G1ChannelOptions);c===v&&(e=slp.moduleSpec[uciFunction.optName.channel5g4]||wifi5G2ChannelOptions);e=e.slice(1);if("0"===g){for(var k=0,l=e.length;k<l;k++)g=L(e,e[k],a),g.length>h.length&&(h=g);g=h}else g=L(e,g,a);k=0;for(l=g.length;k<l;k++)if(parseInt(g[k].value)===parseInt(p)){m=!1;break}m?d[c].bandWidth.resetOptions(g,g[0].value):d[c].bandWidth.resetOptions(g,p);1===g.length?d[c].bandWidth.disable(!0):d[c].bandWidth.disable(!1);slp.gSysModeSupport&&C==M&&d[c].bandWidth.disable(!0);(slp.g11AXSupport.wlan2g||
slp.bandsProvided==slp.DOUBLE&&slp.g11AXSupport.wlan5g||slp.bandsProvided==slp.TRIPLE&&(slp.g11AXSupport.wlan5g1||slp.g11AXSupport.wlan5g4))&&uciWireless.dynOptValue.mode.m_11ac_ax==a?($("#modeTips"+f[c].bandPostfix).show(),(slp.twtSupport||slp.twtSupport5g&&c==q||slp.twtSupport5g1&&c==t||slp.twtSupport5g4&&c==v)&&d[c].twtCon.css("display","table"),(slp.ofdmaSupport||slp.ofdmaSupport5g&&c==q||slp.ofdmaSupport5g1&&c==t||slp.ofdmaSupport5g4&&c==v)&&d[c].ofdmaCon.css("display","table")):($("#modeTips"+
f[c].bandPostfix).hide(),(slp.twtSupport||slp.twtSupport5g&&c==q||slp.twtSupport5g1&&c==t||slp.twtSupport5g4&&c==v)&&d[c].twtCon.css("display","none"),(slp.ofdmaSupport||slp.ofdmaSupport5g&&c==q||slp.ofdmaSupport5g1&&c==t||slp.ofdmaSupport5g4&&c==v)&&d[c].ofdmaCon.css("display","none"))}function H(a,b){var c,g,e,h,m=[],s,k=!0;c=b==d[q].channel?q:b==d[t].channel?t:v;g=d[c].mode.value;e=d[c].bandWidth.value;c===q&&(h=slp.moduleSpec[uciFunction.optName.channel5g]||wifi5GChannelOptions);c===t&&(h=slp.moduleSpec[uciFunction.optName.channel5g1]||
wifi5G1ChannelOptions);c===v&&(h=slp.moduleSpec[uciFunction.optName.channel5g4]||wifi5G2ChannelOptions);h=h.slice(1);if("0"===a){for(var l=0,n=h.length;l<n;l++)s=L(h,h[l],g),s.length>m.length&&(m=s);s=m}else s=L(h,a,g);l=0;for(n=s.length;l<n;l++)if(parseInt(s[l].value)===parseInt(e)){k=!1;break}k?d[c].bandWidth.resetOptions(s,s[0].value):d[c].bandWidth.resetOptions(s,e);1===s.length?d[c].bandWidth.disable(!0):d[c].bandWidth.disable(!1);slp.gSysModeSupport&&C==M&&d[c].bandWidth.disable(!0);void 0!=
slp.moduleSpec.wifison_mesh&&"1"==slp.moduleSpec.wifison_mesh&&52<=a&&64>=a?$("#channelTips"+f[q].bandPostfix).show():$("#channelTips"+f[q].bandPostfix).hide()}function ba(a){var b={},c=this;b[uciWireless.secName.wlanBS]={};b[uciWireless.secName.wlanBS][uciWireless.optName.bsEnable]=a;slp.host.setData({data:b,success:function(){slp.host.getData({success:N,fail:null})},fail:function(b){void 0!=b&&void 0!=b[ERR_CODE]&&z(b[ERR_CODE]);c.setState(1-a)}})}function ca(a){var b,c=this,g={};Object.keys(d).forEach(function(a){c==
d[a].enable&&(b=a)});g[f[b].moduleName]={};g[f[b].moduleName][b==m?uciWireless.optName.wifiEnable:uciWireless.dynOptName.enable]=a;slp.host.setData({data:g,success:function(){slp.host.getData({success:N,fail:null})},fail:function(b){void 0!=b&&void 0!=b[ERR_CODE]&&z(b[ERR_CODE]);c.setState(1-a)}})}function da(a){function b(){var b={data:c};a==m&&(b.name=f[m].moduleName);b.success=function(a){showToast(label.modifySuccess);slp.host.getData({success:N,fail:null})};b.resetPhyConfig=function(){d[a].channel.changeSel(e[a][uciWireless.dynOptName.channel]);
a!=h&&H(e[a][uciWireless.dynOptName.channel],d[a].channel);d[a].mode.changeSel(e[a][uciWireless.dynOptName.mode]);a==h?Q(e[a][uciWireless.dynOptName.mode]):G(e[a][uciWireless.dynOptName.mode],d[a].mode);d[a].bandWidth.changeSel(e[a][uciWireless.dynOptName.bandwidth]);if(slp["muMimoSupport"+f[a].bandPostfix]){var b=1==e[a][uciWireless.dynOptName.vhtmubfer];d[a].muMimoOnRadio.setValue(b);d[a].muMimoOffRadio.setValue(!b)}if(slp.twtSupport||slp["twtSupport"+f[a].bandPostfix])b=1==e[a][uciWireless.optName.twt],
d[a].twtOnRadio.setValue(b),d[a].twtOffRadio.setValue(!b);if(slp.ofdmaSupport||slp["ofdmaSupport"+f[a].bandPostfix])b=1==e[a][uciWireless.optName.ofdma],d[a].ofdmaOnRadio.setValue(b),d[a].ofdmaOffRadio.setValue(!b)};b.fail=function(a){void 0!=a&&void 0!=a[ERR_CODE]&&z(a[ERR_CODE])};slp.host.setData(b)}var c={},g={},p=!1,w=[a],r=!0,s=!1,k=null;c[f[a].moduleName]=g;if(!y||a==m){[d[a].ssid,d[a].pwd].forEach(function(a){r=a.checkAll()&&r});if(!r)return;g[uciWireless.dynOptName.ssid]=d[a].ssid.getValue();
g[uciWireless.dynOptName.key]=d[a].pwd.getValue();g[uciWireless.dynOptName.encryption]=0==d[a].pwd.getValue().length?uciWireless.dynOptValue.encryption.off:uciWireless.dynOptValue.encryption.on;g[uciWireless.dynOptName.ssidbrd]=!0==d[a].ssidBrd.getValue()?uciWireless.dynOptValue.ssidbrd.on:uciWireless.dynOptValue.ssidbrd.off}switch(a){case m:c[f[h].moduleName]={};c[f[h].moduleName][uciWireless.dynOptName.isolate]=!0==d[a].isolate.getValue()?uciWireless.dynOptValue.isolate.on:uciWireless.dynOptValue.isolate.off;
w.push(h);u==slp.DOUBLE?(c[f[q].moduleName]={},c[f[q].moduleName][uciWireless.dynOptName.isolate]=!0==d[a].isolate.getValue()?uciWireless.dynOptValue.isolate.on:uciWireless.dynOptValue.isolate.off,w.push(q)):u==slp.TRIPLE&&(c[f[t].moduleName]=c[f[v].moduleName]={},c[f[t].moduleName][uciWireless.dynOptName.isolate]=c[f[v].moduleName][uciWireless.dynOptName.isolate]=!0==d[a].isolate.getValue()?uciWireless.dynOptValue.isolate.on:uciWireless.dynOptValue.isolate.off,w.push(t),w.push(v));if(y){if(slp.authSupport||
slp.authSupport2g||slp.authSupport5g||slp.authSupport5g1||slp.authSupport5g4)g[uciWireless.dynOptName.auth]=parseInt($(d[a].auth).val());if(slp.cipherSupport||slp.cipherSupport2g||slp.cipherSupport5g||slp.cipherSupport5g1||slp.cipherSupport5g4)g[uciWireless.dynOptName.cipher]=parseInt($(d[a].cipher).val())}break;case h:case q:case t:case v:if(!y){g[uciWireless.dynOptName.isolate]=!0==d[a].isolate.getValue()?uciWireless.dynOptValue.isolate.on:uciWireless.dynOptValue.isolate.off;var l="authSupport"+
f[a].bandPostfix,n="cipherSupport"+f[a].bandPostfix;if(slp.authSupport||slp[l])g[uciWireless.dynOptName.auth]=parseInt($(d[a].auth).val());if(slp.cipherSupport||slp[n])g[uciWireless.dynOptName.cipher]=parseInt($(d[a].cipher).val())}g[uciWireless.dynOptName.channel]=parseInt($(d[a].channel).val());g[uciWireless.dynOptName.mode]=parseInt($(d[a].mode).val());g[uciWireless.dynOptName.bandwidth]=parseInt($(d[a].bandWidth).val());g[uciWireless.dynOptName.power]=parseInt($(d[a].power).val());slp["muMimoSupport"+
f[a].bandPostfix]&&(g[uciWireless.dynOptName.vhtmubfer]=d[a].muMimoOnRadio.getValue()?1:0);if(slp.twtSupport||slp["twtSupport"+f[a].bandPostfix])g[uciWireless.dynOptName.twt]=d[a].twtOnRadio.getValue()?1:0;if(slp.ofdmaSupport||slp["ofdmaSupport"+f[a].bandPostfix])g[uciWireless.dynOptName.ofdma]=d[a].ofdmaOnRadio.getValue()?1:0}for(l=0;l<w.length;l++)p=aa(e[w[l]],c[f[w[l]].moduleName])||p,$.isEmptyObject(c[f[w[l]].moduleName])&&delete c[f[w[l]].moduleName],c[f[w[l]].moduleName]&&c[f[w[l]].moduleName][uciWireless.dynOptName.ssid]&&
checkStrHasCN(d[a].ssid.getValue())&&(null==k&&(k=d[a].ssid),s=!0);var x=!1;void 0!=slp.moduleSpec.wifison_mesh&&"1"==slp.moduleSpec.wifison_mesh&&e[q].channel!=g.channel&&52<=g.channel&&64>=g.channel&&(x=!0);p&&(s?confirmDialog.show({content:label.confirmSsidHasCNChar,button:{confirmStr:btn.btnY,cancelStr:btn.btnN},callback:function(a){a?k.input.select():x?confirmDialog.show({content:label.band2CompatibilityTips1,callback:function(a){a&&b()}}):b()}}):x?confirmDialog.show({content:label.band2CompatibilityTips1,
callback:function(a){a&&b()}}):b())}function F(a,b,c,d,f,e){b=$('<ul class="inputCMPT medium selectUl"><label class="outerLbl">'+b+'</label><li class="inputLi"><span class="selectWrap"><span id='+c+' class="select"><span class="value"></span><i class="arrow iconfont icon-folddropdown"></i></span></span></li></ul>')[0];$("#"+a).append(b);selectInit(c,d,f,e)}function O(a){for(var b=[],c=a.length,d=0;d<c;d++)b[d]="auto"==a[d]?{str:label.wirelessAuto,value:"0"}:{str:a[d],value:a[d]};return b}function R(a){var b=
[];if(void 0==a)b=authOption;else for(var c=0;c<a.length;++c){var d=a[c];b[c]={str:authOptStr[d],value:d}}return b}function P(a){var b;$.isArray(a)||(a=[a]);for(var c=0;c<a.length;c++){b=a[c];b==m?(d[b].enable.setState(e[b][uciWireless.optName.wifiEnable]),u==slp.DOUBLE?S=parseInt(e[h][uciWireless.dynOptName.isolate])==parseInt(uciWireless.dynOptValue.isolate.on)||parseInt(e[q][uciWireless.dynOptName.isolate])==parseInt(uciWireless.dynOptValue.isolate.on):u==slp.TRIPLE&&(S=parseInt(e[h][uciWireless.dynOptName.isolate])==
parseInt(uciWireless.dynOptValue.isolate.on)||parseInt(e[t][uciWireless.dynOptName.isolate])==parseInt(uciWireless.dynOptValue.isolate.on)||parseInt(e[v][uciWireless.dynOptName.isolate])==parseInt(uciWireless.dynOptValue.isolate.on)),d[b].isolate.setValue(S)):(d[b].enable.setState(e[b][uciWireless.dynOptName.enable]),d[b].isolate.setValue(parseInt(e[b][uciWireless.dynOptName.isolate])==parseInt(uciWireless.dynOptValue.isolate.on)?!0:!1));d[b].ssid.setValue(e[b][uciWireless.dynOptName.ssid]);d[b].pwd.setValue(e[b][uciWireless.dynOptName.key]);
d[b].ssidBrd.setValue(parseInt(e[b][uciWireless.dynOptName.ssidbrd])==parseInt(uciWireless.dynOptValue.ssidbrd.on)?!0:!1);var g="authSupport"+f[b].bandPostfix,p="cipherSupport"+f[b].bandPostfix;(slp.authSupport||b==m&&(slp.authSupport2g||slp.authSupport5g||slp.authSupport5g1||slp.authSupport5g4)||b!=m&&slp[g])&&d[b].auth.changeSel(e[b][uciWireless.dynOptName.auth]);(slp.cipherSupport||b==m&&(slp.cipherSupport2g||slp.cipherSupport5g||slp.cipherSupport5g1||slp.cipherSupport5g4)||b!=m&&slp[p])&&d[b].cipher.changeSel(e[b][uciWireless.dynOptName.cipher]);
if(b!=m){d[b].channel.changeSel(e[b][uciWireless.dynOptName.channel]);b!=h&&H(e[b][uciWireless.dynOptName.channel],d[b].channel);d[b].mode.changeSel(e[b][uciWireless.dynOptName.mode]);b==h?Q(e[b][uciWireless.dynOptName.mode]):G(e[b][uciWireless.dynOptName.mode],d[b].mode);d[b].bandWidth.changeSel(e[b][uciWireless.dynOptName.bandwidth]);d[b].power.changeSel(e[b][uciWireless.dynOptName.power]);slp["muMimoSupport"+f[b].bandPostfix]&&(g=1==e[b][uciWireless.dynOptName.vhtmubfer],d[b].muMimoOnRadio.setValue(g),
d[b].muMimoOffRadio.setValue(!g));if(slp.twtSupport||slp["twtSupport"+f[b].bandPostfix])g=1==e[b][uciWireless.optName.twt],d[b].twtOnRadio.setValue(g),d[b].twtOffRadio.setValue(!g);if(slp.ofdmaSupport||slp["ofdmaSupport"+f[b].bandPostfix])g=1==e[b][uciWireless.optName.ofdma],d[b].ofdmaOnRadio.setValue(g),d[b].ofdmaOffRadio.setValue(!g)}}}function N(a){switch(u){case slp.TRIPLE:e[h]=a[uciWireless.fileName][uciWireless.dynData.host_2g];e[t]=a[uciWireless.fileName][uciWireless.dynData.host_5g1];e[v]=
a[uciWireless.fileName][uciWireless.dynData.host_5g2];break;case slp.DOUBLE:e[h]=a[uciWireless.fileName][uciWireless.dynData.host_2g];e[q]=a[uciWireless.fileName][uciWireless.dynData.host_5g];break;case slp.SINGLE:e[h]=a[uciWireless.fileName][uciWireless.dynData.host_2g]}W&&(e[m]=a[uciWireless.fileName][uciWireless.secName.wlanBS],y="1"==e[m][uciWireless.optName.bsEnable]?!0:!1,P([m]),X.setState(e[m][uciWireless.optName.bsEnable]),a=e[m][uciWireless.optName.bsEnable],$("ul.bsShow").css("display",
"1"==a?"table":"none"),$("ul.bsNotShow").css("display","1"==a?"none":"table"),$(".switchCon.bsShow").css("display","1"==a?"inline-block":"none"),$(".switchCon.bsNotShow").css("display","1"==a?"none":"inline-block"),$(".subTitle.bsShow, div.bsShow").css("display","1"==a?"block":"none"),$("#wifi2GTitle").text("1"==a?label.wirelessNetHighset2G:label.wirelessNet2G),$("#wifi5GTitle").text("1"==a?label.wirelessNetHighset5G:label.wirelessNet5G),$("#wifi5G1Title").text("1"==a?label.wirelessNetHighset5G1:
label.wirelessNet5G1),$("#wifi5G2Title").text("1"==a?label.wirelessNetHighset5G2:label.wirelessNet5G2));switch(u){case slp.TRIPLE:P([h,t,v]);break;case slp.DOUBLE:P([h,q]);break;case slp.SINGLE:P([h])}T()}function T(){null!=I&&(clearTimeout(I),I=null);slp.getWiFiStatus(function(a){if(Y)if(isWifiAllSwitchOpen=a[uciWireless.fileName][uciWireless.dynData.wifi_switch][uciWireless.dynOptName.enable]==uciWireless.dynOptValue.enable.on)$(".wifiSetCon").css("display","block"),$("div.tipText").css("display",
"none"),void 0!=id("wifiAllSwitchClose")&&removeTitleError("wifiAllSwitchClose");else{$(".wifiSetCon").css("display","none");$("div.tipText").html(label.wifiAllSwitchCloseStateTips);$("div.tipText").css("display","block");void 0==id("wifiAllSwitchClose")&&addTitleError("wifiAllSwitchClose",label.canNotSetWifiDueToWifiAllSwitch,{hasIcon:!1,hasBtn:!0,btnArr:[{btnStr:btn.openWifiAllSwitch,btnOnclick:function(){var a={};a[uciWireless.dynData.wifi_switch]={};a[uciWireless.dynData.wifi_switch][uciWireless.dynOptName.enable]=
uciWireless.dynOptValue.enable.on;slp.host.setData({data:a,success:function(){}})}}]});I=$.setTimeout(T,2E3);return}y?d[m].enable.setState(a[uciWireless.fileName][uciWireless.secName.wlanBS][uciWireless.optName.wifiEnable]):u==slp.TRIPLE?(d[h].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_2g][uciWireless.dynOptName.enable]),d[t].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_5g1][uciWireless.dynOptName.enable]),d[v].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_5g2][uciWireless.dynOptName.enable])):
u==slp.DOUBLE?(d[h].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_2g][uciWireless.dynOptName.enable]),d[q].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_5g][uciWireless.dynOptName.enable])):u==slp.SINGLE&&d[h].enable.setState(a[uciWireless.fileName][uciWireless.dynData.host_2g][uciWireless.dynOptName.enable]);I=$.setTimeout(T,2E3)})}function U(a,b){var c={};c[uciCustomWireless.fileName]={};c[uciCustomWireless.fileName][uciCustomWireless.secName.wpsConfig]={};
c[uciCustomWireless.fileName][uciCustomWireless.secName.wpsConfig][uciCustomWireless.optName.pinEnable]=a;c[uciCustomWireless.fileName][uciCustomWireless.secName.wpsConfig][uciCustomWireless.optName.pinCode]=b;$.modify(c,function(c){c[ERR_CODE]==ENONE?($("#pinCode").text(b),$(".pinCodeBlock").toggle("on"==a)):z(c[ERR_CODE]);closeLoading()})}function Z(a){a={};a[uciCustomWireless.fileName]={};a[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsGeneratePin]=null;showLoading();$.action(a,function(a){ENONE==
a[ERR_CODE]?U("on",a[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsGeneratePin][uciCustomWireless.optName.vendorPin]):(closeLoading(),z(a[ERR_CODE]))})}function ea(){var a;a=0==id("wpsMethod").value?uciCustomWireless.optValue.linkType.button:uciCustomWireless.optValue.linkType.pin;var b={};b[uciCustomWireless.fileName]={};b[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsLink]={};b[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsLink][uciCustomWireless.optName.linkType]=
a;b[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsLink][uciCustomWireless.optName.band]="all";if(1==id("wpsMethod").value){a=J.checkAll();if(!a)return;a=J.getValue();b[uciCustomWireless.fileName][uciCustomWireless.actionName.wpsLink][uciCustomWireless.optName.terminalPinCode]=a}showLoading();$.action(b,function(a){a[ERR_CODE]!=ENONE&&z(a[ERR_CODE]);closeLoading()})}function fa(a){var b="on"==a.pin_enable?1:0,c=a.wsc_vendorpin;$("#wpsConfigBlock").show();$("#pinCode").text(c);id("refreshPinCode").onclick=
Z;$(".pinCodeBlock").toggle(!!b);new Switch("wpsSwitch",b,function(a){showLoading();a?0==c.length?Z():U("on",c):U("off",c)},!1);F("wpsConfigBlock",label.wpsMethod,"wpsMethod",wpsMethod,wpsMethod[0].value,function(a){$(J.dom).toggle(!!a)});J=new Input({type:Input.TYPE.PLAIN_TEXT,label:{value:label.wpsTerminalPin},targetId:"wpsConfigBlock",check:{blur:checkPinInput},props:{maxlength:"8",type:"text"}});$(J.dom).toggle(!1);$("#wpsConfigBlock").append($('<div id="connectBtn"></div>'));new Button({text:btn.connect,
type:Button.TYPE.PRIMARY,id:"connectBtn",onClick:ea,props:{width:"240px",margin:"16px 0 0 132px"}})}function B(a,b){var c,g,e,w,r,s,k,l,n,x,A,u,y,z,D,E,B,C;d[a]={};d[a].enable=new Switch(f[a].switchId,1,ca,!1);d[a].ssid=new Input({type:Input.TYPE.PLAIN_TEXT,label:{value:label.wirelessName},targetId:b,check:{blur:checkSsidInput},className:a==m?"bsShow":"bsNotShow",props:{maxlength:"32",type:"text"},innerElement:{id:"wifiSsidBrd"+a,className:"checkboxElement"}});d[a].ssidBrd=new CheckBox({targetId:"wifiSsidBrd"+
a,label:label.wirelessSsidBrd,checked:!1,onClick:null});d[a].pwd=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.wirelessPwd},targetId:b,strength:{show:!0,least:8,critical:12},check:{blur:onPwdBlur,keyup:onPwdKeyup},className:a==m?"bsShow":"bsNotShow",props:{maxlength:"63",type:"text"}});if(a==m){if(slp.authSupport||slp.authSupport2g||slp.authSupport5g||slp.authSupport5g1||slp.authSupport5g4){r=slp.moduleSpec[uciFunction.optName.supportWlanAuthType2g];k=slp.moduleSpec[uciFunction.optName.supportWlanAuthType5g];
r=void 0===r?[].concat(authOption):R(r);k=void 0===k?[].concat(authOption):R(k);for(l=0;l<r.length;l++)for(A=0;A<k.length;A++)k[A].str!==r[l].str&&k[A].value!==r[l].value||k.splice(A,1);c=r.concat(k);c.sort(function(a,b){return a-b});n="wifiBsAuth";authClass="bsShow";F(b,label.wirelessAuth,n,c,c[0].value,V);d[a].auth=id(n);$("#"+n).parents(".selectUl").addClass(authClass);c='<span id="authTips'+f[a].bandPostfix+'" class="suffixText authSuffixText">{%label.compatibilityTipsSelected%}</span>';$("#"+
n).parents(".inputLi").after(c)}if(slp.cipherSupport||slp.cipherSupport2g||slp.cipherSupport5g||slp.cipherSupport5g1||slp.cipherSupport5g4)e=cipherOption,x="wifiBsCipher",cipherClass="bsShow",F(b,label.wirelessCipher,x,e,e[0].value),d[a].cipher=id(x),$("#"+x).parents(".selectUl").addClass(cipherClass)}else if(a!=m){c="authSupport"+f[a].bandPostfix;w="cipherSupport"+f[a].bandPostfix;if(slp.cipherSupport||slp[w])e=cipherOption;switch(a){case h:n="wifi2GAuth";g="supportWlanAuthType2g";x="wifi2GCipher";
r=wifi2GModeOptions;slp.g11AXSupport.wlan2g&&(r=wifi2GModeOptionsAX);A="wifi2GMode";s=O(slp.moduleSpec[uciFunction.optName.channel2g]||wifi2GChannelOptions);u="wifi2GChannel";k=wifiBandWidthOptions40M;y="wifi2GBandWidth";z="wifi2GPower";B=Q;!0==slp.muMimoSupport2g&&(E="wifi2GMuMimo");if(slp.twtSupport||slp.twtSupport2g)D="twt2GSwitch";if(slp.ofdmaSupport||slp.ofdmaSupport2g)ofdmaSwitchId="ofdma2GSwitch";break;case q:n="wifi5GAuth";g="supportWlanAuthType5g";x="wifi5GCipher";r=wifi5GModeOptionsAC;slp.g11AXSupport.wlan5g&&
(r=wifi5GModeOptionsAX);A="wifi5GMode";s=O(slp.moduleSpec[uciFunction.optName.channel5g]||wifi5GChannelOptions);u="wifi5GChannel";k=wifiBandWidthOptions80M;y="wifi5GBandWidth";z="wifi5GPower";B=G;C=H;!0==slp.muMimoSupport5g&&(E="wifi5GMuMimo");if(slp.twtSupport||slp.twtSupport5g)D="twt5GSwitch";if(slp.ofdmaSupport||slp.ofdmaSupport5g)ofdmaSwitchId="ofdma5GSwitch";break;case t:n="wifi5G1Auth";g="supportWlanAuthType5g1";x="wifi5G1Cipher";r=wifi5GModeOptionsAC;slp.g11AXSupport.wlan5g1&&(r=wifi5GModeOptionsAX);
A="wifi5G1Mode";s=O(slp.moduleSpec[uciFunction.optName.channel5g1]||wifi5G1ChannelOptions);u="wifi5G1Channel";k=wifiBandWidthOptions80M;y="wifi5G1BandWidth";z="wifi5G1Power";B=G;C=H;!0==slp.muMimoSupport5g1&&(E="wifi5G1MuMimo");if(slp.twtSupport||slp.twtSupport5g1)D="twt5G1Switch";if(slp.ofdmaSupport||slp.ofdmaSupport5g1)ofdmaSwitchId="ofdma5G1Switch";break;case v:n="wifi5G2Auth";g="supportWlanAuthType5g4";x="wifi5G2Cipher";r=wifi5GModeOptionsAC;slp.g11AXSupport[wlan5g4]&&(r=wifi5GModeOptionsAX);
A="wifi5G2Mode";s=O(slp.moduleSpec[uciFunction.optName.channel5g4]||wifi5G2ChannelOptions);u="wifi5G2Channel";k=wifiBandWidthOptions80M;y="wifi5G2BandWidth";z="wifi5G2Power";B=G;C=H;!0==slp.muMimoSupport5g4&&(E="wifi5G2MuMimo");if(slp.twtSupport||slp.twtSupport5g4)D="twt5G4Switch";if(slp.ofdmaSupport||slp.ofdmaSupport5g4)ofdmaSwitchId="ofdma5G4Switch"}l=slp.moduleSpec.power_list&&2==slp.moduleSpec.power_list.length?wifiPowerOptionsTurbo:wifiPowerOptionsNormal;if(slp.authSupport||slp[c])c=slp.moduleSpec[uciFunction.optName[g]],
c=void 0==c?authOption:R(c),F(b,label.wirelessAuth,n,c,c[0].value,V),d[a].auth=id(n),authClass="bsNotShow",$("#"+n).parents(".selectUl").addClass(authClass),c='<span id="authTips'+f[a].bandPostfix+'" class="suffixText authSuffixText">{%label.compatibilityTipsSelected%}</span>',$("#"+n).parents(".inputLi").after(c);if(slp.cipherSupport||slp[w])F(b,label.wirelessCipher,x,e,e[0].value),d[a].cipher=id(x),cipherClass="bsNotShow",$("#"+x).parents(".selectUl").addClass(cipherClass);F(b,label.wirelessChannel,
u,s,s[0].value,C);d[a].channel=id(u);e='<span id="channelTips'+f[a].bandPostfix+'" class="suffixText authSuffixText">{%label.band2CompatibilityTips2%}</span>';$("#"+u).parents(".inputLi").after(e);F(b,label.wirelessMode,A,r,r[0].value,B);d[a].mode=id(A);if(slp.g11AXSupport.wlan2g||slp.g11AXSupport.wlan5g||slp.g11AXSupport.wlan5g1||slp.g11AXSupport.wlan5g4)c='<span id="modeTips'+f[a].bandPostfix+'" class="suffixText authSuffixText">{%label.compatibilityTipsSelected%}</span>',$("#"+A).parents(".inputLi").after(c);
F(b,label.wirelessWidth,y,k,k[0].value,void 0);d[a].bandWidth=id(y);F(b,label.wirelessTxPwr,z,l,l[0].value);d[a].power=id(z)}$("#"+b).append($('<ul class="inputCMPT medium'+(a==m?" bsShow":" bsNotShow")+'"><label class="outerLbl"></label><div id="wifiIsolate'+a+'"></div></ul>')[0]);d[a].isolate=new CheckBox({targetId:"wifiIsolate"+a,label:label.apIsolate,checked:!1,onClick:null});if(a!=m){slp["muMimoSupport"+f[a].bandPostfix]&&(d[a].muMimoCon=$('<ul class="inputCMPT medium"><label class="outerLbl">{%label.wirelessMUMIMO%}</label><span id="'+
E+'Off" class="radioItem"></span><span id="'+E+'On" class="radioItem"></span></ul>'),$("#"+b).append(d[a].muMimoCon),d[a].muMimoOffRadio=new Radio({targetId:E+"Off",label:label.close,name:E+"Enable"}),d[a].muMimoOnRadio=new Radio({targetId:E+"On",label:label.open,name:E+"Enable"}));if(slp.twtSupport||slp["twtSupport"+f[a].bandPostfix])d[a].twtCon=$('<ul class="inputCMPT medium"><label class="outerLbl">{%label.TWT%}</label><span id="'+D+'Off" class="radioItem"></span><span id="'+D+'On" class="radioItem"></span><span class="suffixText">{%label.compatibilityTipsOpen%}</span></ul>'),
$("#"+b).append(d[a].twtCon),d[a].twtOffRadio=new Radio({targetId:D+"Off",label:label.close,name:D+"Enable"}),d[a].twtOnRadio=new Radio({targetId:D+"On",label:label.open,name:D+"Enable"});if(slp.ofdmaSupport||slp["ofdmaSupport"+f[a].bandPostfix])d[a].ofdmaCon=$('<ul class="inputCMPT medium"><label class="outerLbl">{%label.OFDMA%}</label><span id="'+ofdmaSwitchId+'Off" class="radioItem"></span><span id="'+ofdmaSwitchId+'On" class="radioItem"></span></ul>'),$("#"+b).append(d[a].ofdmaCon),d[a].ofdmaOffRadio=
new Radio({targetId:ofdmaSwitchId+"Off",label:label.close,name:ofdmaSwitchId+"Enable"}),d[a].ofdmaOnRadio=new Radio({targetId:ofdmaSwitchId+"On",label:label.open,name:ofdmaSwitchId+"Enable"})}$("#"+b).append($('<div id="saveBtn'+a+'"></div>')[0]);d[a].saveBtn=new Button({text:btn.save,type:Button.TYPE.PRIMARY,id:"saveBtn"+a,onClick:function(){da(a)},props:{width:"240px",margin:"16px 0 0 132px"}})}var h=0,q=1,t=2,v=3,m=4,M=2,C=0,d={},e={},S,f={};f[h]={switchId:"wifi2GSwitch",moduleName:uciWireless.dynData.host_2g,
bandPostfix:"2g"};f[q]={switchId:"wifi5GSwitch",moduleName:uciWireless.dynData.host_5g,bandPostfix:"5g"};f[t]={switchId:"wifi5G1Switch",moduleName:uciWireless.dynData.host_5g1,bandPostfix:"5g1"};f[v]={switchId:"wifi5G2Switch",moduleName:uciWireless.dynData.host_5g2,bandPostfix:"5g4"};f[m]={switchId:"bandSteeringSwitch",moduleName:uciWireless.secName.wlanBS,bandPostfix:"bs"};var u=slp.bandsProvided,W=slp.bandSteeringProvided,y=!1,X=null,Y=!1,I=null,J;u==slp.TRIPLE?($(".wifi2GCon").css("display","block"),
$(".wifi5G1Con").css("display","block"),$(".wifi5G2Con").css("display","block"),B(h,"wifi2GBasicArgument"),B(t,"wifi5G1BasicArgument"),B(v,"wifi5G2BasicArgument")):u==slp.DOUBLE?($(".wifi2GCon").css("display","block"),$(".wifi5GCon").css("display","block"),B(h,"wifi2GBasicArgument"),B(q,"wifi5GBasicArgument")):u==slp.SINGLE&&($("#wifi2GTitle").text(label.wirelessHost),$(".wifi2GCon").css("display","block"),B(h,"wifi2GBasicArgument"));W&&($(".bandSteeringCon").css("display","block"),B(m,"bandSteeringBasicArgument"),
X=new Switch("bandSteeringEnableSwitch",1,ba,!1));(slp.authSupport||slp.authSupport2g||slp.authSupport5g||slp.authSupport5g1||slp.authSupport5g4)&&$("#authHelp").show();(slp.cipherSupport||slp.cipherSupport2g||slp.cipherSupport5g||slp.cipherSupport5g1||slp.cipherSupport5g4)&&$("#cipherHelp").show();(slp.muMimoSupport2g||slp.muMimoSupport5g||slp.muMimoSupport5g1||slp.muMimoSupport5g4)&&$("#muMimoHelp").show();(slp.twtSupport||slp.twtSupport2g||slp.twtSupport5g||slp.twtSupport5g1||slp.twtSupport5g4)&&
$("#twtHelp").show();(slp.ofdmaSupport||slp.ofdmaSupport2g||slp.ofdmaSupport5g)&&$("#ofdmaHelp").show();slp.wpsSupport&&$("#wpsHelp").show();slp.moduleSpec.wifi_switch&&1==slp.moduleSpec.wifi_switch&&(Y=!0);slp.host.getData({success:N});if(slp.wpsSupport){var K={};K[uciCustomWireless.fileName]={};K[uciCustomWireless.fileName][KEY_NAME]=uciCustomWireless.secName.wpsConfig;$.query(K,function(a){a[ERR_CODE]==ENONE?fa(a[uciCustomWireless.fileName][uciCustomWireless.secName.wpsConfig]):z(a[ERR_CODE])})}slp.gSysModeSupport&&
(K={system:{name:"sys_mode"}},$.query(K,function(a){C=a.system.sys_mode.mode;if(C==M){$(".relayErrorTip").show();$("#relayTipText").text("上网方式为桥接（无线中继）时，部分设置不可用。");for(var b in d)for(var c in d[b])d[b].hasOwnProperty(c)&&"auth"!=c&&"enable"!=c&&"pwd"!=c&&"saveBtn"!=c&&"ssid"!=c&&"ssidBrd"!=c&&"twtCon"!=c&&"ofdmaCon"!=c&&d[b][c].disable(!0)}}))})();
</script><style type="text/css">.bandSteeringCon,.wifi2GCon,.wifi5GCon,.wifi5G1Con,.wifi5G2Con,.tipText{display:none}div.subTitle p.description{font-size:13px;color:#666;line-height:20px;padding-top:16px}div.wpsConfigBlock{display:none}div#wpsSwitch{margin-top:8px}div.pinCodeBlock{display:none;padding-left:132px;margin-bottom:12px;line-height:32px;font-size:13px;color:#666}div.pinCodeBlock label.pinCode{display:inline-block;height:20px;line-height:20px;margin-bottom:8px;color:#333;font-weight:bold}div.refreshBtn{width:240px;height:32px;padding:0 16px;font-size:13px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;vertical-align:top;text-align:center;cursor:pointer}div.refreshBtn span{line-height:30px;font-size:13px;vertical-align:middle;margin-left:4px;color:#333}div.refreshBtn i.iconfont{font-size:16px;vertical-align:middle;line-height:30px;color:#999}div.refreshBtn:hover i.iconfont{color:#f36}div.refreshBtn:hover span{color:#f36}ul.inputCMPT.medium div.switchCon{margin:8px 0}span.radioItem+span.radioItem{margin-left:16px}span.suffixText{font-size:12px;color:#333;vertical-align:middle}span.authSuffixText{display:none;position:absolute;left:384px;top:8px;width:360px}#channelTips5g{top:0;width:380px}</style>