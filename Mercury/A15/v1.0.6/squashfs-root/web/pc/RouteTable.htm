

<div class="head">
	<div class="title">
		<h1>{%menuStr.router%}</h1>
		<i class="helpBtn iconfont icon-help" helpStr="routeTableHelp"></i>
	</div>
	<p class="description">{%titleDescriptionStr.routeDescription%}</p>
</div>
<div id="routeTabCon"></div>
<div id="staticRouteTab"></div>
<div id="systemRouteTab"></div><script type="text/javascript">(function(){function p(b){var a="";switch(b){case ENONE:return!0;case EINVIP:a=errStr.ipAddrErr;break;case EINVIPFMT:a=errStr.ipAddrFmtErr;break;case EINVGROUPIP:a=errStr.ipAddrGroupErr;break;case EINVLOOPIP:a=errStr.ipAddrLoopErr;break;case EINVMASK:a=errStr.maskErr;break;case EINVIPMASKPAIR:a=errStr.stcIpMaskNotMatch;break;case ENETMASKNOTMATCH:a=errStr.networkMaskNotMatch;break;case ENETLANSAME:a=errStr.networkLanSame;break;case ENETWANSAME:a=errStr.networkWanSame;break;case EINVGTW:a=errStr.gatewayErr;
break;case EGTWUNREACH:a=errStr.gatewayUnreachErr;break;case EENTRYNOTEXIST:a=errStr.entryNoExistErr;break;case EENTRYEXIST:a=errStr.entryExistErr;break;case EENTRYCONFLIC:a=errStr.entryConflicErr;break;case ETABLEFULL:a=errStr.tableFullErr;break;case EINVINSTRUCT:a=errStr.instructErr;break;default:a=errStr.unknown+b}alarmDialog.show(a);return!1}function h(b,a,c){p(b[ERR_CODE])&&(showToast(c),a(!0),q());k()}function q(){e=t();r.setDataSource(e);r.loadData();$("#staRouteCount").html(e.length)}function t(){var b=
{};b[uciNetwork.fileName]={};b[uciNetwork.fileName][KEY_TABLE]=uciNetwork.secType.user_route;return $.query(b,function(a){return a[ERR_CODE]==ENONE?formatTableData(a[uciNetwork.fileName][uciNetwork.secType.user_route]):[]},!1)}function k(){l=u();s.setDataSource(l);s.loadData();$("#sysRouteCount").html(l.length);"refresh"==m&&showToast(label.refreshSuccess);m="normal"}function u(){var b={};b[uciNetwork.fileName]={};b[uciNetwork.fileName][KEY_TABLE]=uciNetwork.secType.sys_route;return $.query(b,function(a){return a[ERR_CODE]==
ENONE?formatTableData(a[uciNetwork.fileName][uciNetwork.secType.sys_route]):[]},!1)}var e=[],l=[],m="normal";new Tab({list:[{name:label.routeStcList+label.lBrackets+"<span id='staRouteCount'>0</span>"+label.rBrackets,contentId:"staticRouteTab"},{name:label.routeSysList+label.lBrackets+"<span id='sysRouteCount'>0</span>"+label.rBrackets,contentId:"systemRouteTab"}],targetId:"routeTabCon"});var r=new Table({targetId:"staticRouteTab",head:[{field:label.targetAddr,width:"0.33"},{field:label.mask,width:"0.33"},
{field:label.nextStepAddr,width:"0.34"}],column:[{name:uciNetwork.optName.target,type:"ip"},{name:uciNetwork.optName.netmask,type:"mask"},{name:uciNetwork.optName.gateway,type:"gateway"}],clickList:{click_save:{func:function(b,a,c,f){var g=a.target,n=a.netmask;a=a.gateway;var d=checkNetworkMask(g,n);if(!p(d))return f(!1);d={};"add"==b?(c={},d[uciNetwork.fileName]={},d[uciNetwork.fileName][KEY_NAME]=uciNetwork.secType.user_route+"_"+calcNextIndex(e),d[uciNetwork.fileName][KEY_TABLE]=uciNetwork.secType.user_route,
d[uciNetwork.fileName][KEY_PARA]=c,c[uciNetwork.optName.target]=g,c[uciNetwork.optName.netmask]=n,c[uciNetwork.optName.gateway]=a,$.add(d,function(a){h(a,f,label.addSuccess)})):(b={},c=e[c][SEC_NAME],d[uciNetwork.fileName]={},d[uciNetwork.fileName][c]=b,b[uciNetwork.optName.target]=g,b[uciNetwork.optName.netmask]=n,b[uciNetwork.optName.gateway]=a,$.modify(d,function(a){h(a,f,label.saveSuccess)}));return!0},asyn:!0},click_del_item:{func:function(b,a){var c=b.split("-"),f=[];for(b in c)if(c.hasOwnProperty(b)){var g=
c[b];null!=e[g]&&(f[b]=e[g][SEC_NAME])}c={};c[uciNetwork.fileName]={};c[uciNetwork.fileName][KEY_NAME]=f;$.del(c,function(b){h(b,a,label.deleteSuccess)});return!0},asyn:!0}},max:STATIC_ROUTE_RULE_MAX}),s=new Table({targetId:"systemRouteTab",hasCheckBox:!1,editable:!1,deletable:!1,addable:!1,head:[{field:label.targetAddr,width:"0.27"},{field:label.mask,width:"0.27"},{field:label.nextStepAddr,width:"0.27"},{field:label.ifName,width:"0.19"}],column:[{name:uciNetwork.optName.target},{name:uciNetwork.optName.netmask},
{name:uciNetwork.optName.gateway},{name:uciNetwork.optName.iface}],tableOption:[{icon:"icon-refresh",str:btn.refresh,selRelate:!1,type:"refresh",func:function(){m="refresh";k()}}]});q();k()})();
</script><style type="text/css"></style>