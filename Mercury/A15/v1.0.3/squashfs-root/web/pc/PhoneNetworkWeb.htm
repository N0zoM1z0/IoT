

<div class="textCenter" id="detecting">
	<img class="detectingGif" src="../web-static/images/wanDetecting.gif" />
	<p class="detectTip detecting">正在检测上网方式...</p>
</div>
<div class="textCenter disNone" id="detectErr">
	<img class="detectErr" src="../web-static/images/phoneWarn.png" />
	<p class="detectTip wanLinkDown">{%errStr.phWanLinkDown%}</p>
	<p class="detectTipDes">{%label.phWanWzdCheckNoteT%}</p>
	<label id="skipWanDetect" class="skip">{%errStr.skipWanDetect%}</a>
</div><script type="text/javascript">function init(){function p(a){if(ENONE==a[ERR_CODE]){var g=a[uciDeviceInfo.fileName][uciDeviceInfo.secName.info];g[uciDeviceInfo.optName.swVer].split(" ");gNetworkCfg[uciProto.optName.type]=a[b][h][uciProto.optName.type];gNetworkCfg[uciProto.optValue.proto.pppoe]=a[b][k];gNetworkCfg[uciProto.optValue.proto.staticIp]=a[b][l];gNetworkCfg[uciProto.optValue.proto.dynIp]=a[b][m];gNetworkCfg.lanIp=a[uciNetwork.fileName][uciNetwork.secName.lan][uciNetwork.optName.ip];gCloudAccountBR.softVersion=g[uciDeviceInfo.optName.swVer]}}
function q(){var a={};a[b]={};a[b][KEY_NAME]=[h,l,k,m];a[uciDeviceInfo.fileName]={};a[uciDeviceInfo.fileName][KEY_NAME]=uciDeviceInfo.secName.info;a[uciNetwork.fileName]={};a[uciNetwork.fileName][KEY_NAME]=uciNetwork.secName.lan;$.query(a,p)}function c(){var a={};a[uciNetwork.fileName]={};a[uciNetwork.fileName][uciNetwork.action.wanDetect]=null;$.action(a,function(a){switch(parseInt(a[uciNetwork.optName.proto])){case ERROR_INTERNEL_ERROR:case ERROR_INPUT_PARA_ERROR:case WAN_IFACE_NOT_LINK:$.setTimeout(c,
1E3);break;default:$("#detecting").css("display","block"),closePhConfirm(),$.setTimeout(function(){d=$.setTimeout(function(){$("#detecting").css("display","none");e();c()},1E4);n()},2E3)}})}function n(){function a(){$.action(b,function(b){b=parseInt(b[uciNetwork.optName.proto]);!0==$.local&&(b=WAN_TYPE_PPPOE);switch(b){case ERROR_INTERNEL_ERROR:case ERROR_INPUT_PARA_ERROR:case WAN_IFACE_NOT_LINK:$("#detecting").css("display","none");e();clearTimeout(d);c();break;case WAN_TYPE_DETECTING:f=$.setTimeout(a,
1E3);break;default:clearTimeout(d),wzdNetWorkModeChange(b)}})}var b={};b[uciNetwork.fileName]={};b[uciNetwork.fileName][uciNetwork.action.wanDetect]=null;a()}function e(){showPhConfirm("<p class='noLinkInfo'>WAN口未连接</p><p class='detailHelpInfo'>请检查宽带网线是否接入路由器WAN口。</p><p class='detailHelpInfo'>请检查网口指示灯是否闪烁，或更换网线重新尝试。</p><p class='detailHelpInfo'>若仍无法上网，请联系您的网络运营商。</p>",function(a){a?wzdNetWorkModeChange(WAN_TYPE_PPPOE):($("#detecting").css("display","block"),c(),d=$.setTimeout(function(){clearTimeout(f);
$("#detecting").css("display","none");e();c()},1E4))},"跳过检测","重新检测")}var b=uciProto.fileName,h=uciProto.secName.wan,l=uciProto.secName.sta,k=uciProto.secName.pppoe,m=uciProto.secName.dhcp,d=null,f=null;id("skipWanDetect").onclick=function(){wzdNetWorkModeChange(WAN_TYPE_PPPOE)};try{q()}catch(r){}d=$.setTimeout(function(){clearTimeout(f);$("#detecting").css("display","none");e();c()},1E4);n()}init();
</script><style type="text/css">div.phWzdAlertCon .detailHelpInfo{text-align:left;color:#666;margin:0 7px;font-size:13px}div.phWzdAlertCon .noLinkInfo{font-size:15px;color:#333}img.detectingGif{height:20px;margin:120px auto 0;width:20px}p.detectTip{color:#000;font-size:16px;text-align:center}p.detectTipDes{color:#8d9199;font-size:14px;text-align:center;margin-top:10px}.textCenter{text-align:center}.bold{font-weight:bold}p.detecting{margin-top:20px}p.wanLinkDown{margin-top:20px}img.detectErr{height:80px;margin:120px auto 0;width:80px}label.skip{color:#ff66a3;display:block;font-size:16px;margin:20px auto 0;width:140px}</style>