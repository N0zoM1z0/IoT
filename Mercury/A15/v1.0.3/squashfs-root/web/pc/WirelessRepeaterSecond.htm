

<div class="subTitle">
	<h2>设置本路由</h2>
</div>
<label id="setCurRouterInfo">请设置本路由器的Wi-Fi名称和密码（推荐与前端路由保持一致，实现无缝漫游）</label>
<div id="frontCheckBox"></div>
<div id="router4Con" class="disNone">
	<div id="wdsSsidCon" class="wdsSsidPwdInput"></div>
	<div id="wdsPwdCon" class="wdsSsidPwdInput passwordCon"></div>
</div>
<div id="router0Con" class="disNone">
	<div class="subTitle">
		<h2>2.4G Wi-Fi</h2>
	</div>
	<div id="twoGSsidCon" class="wdsSsidPwdInput"></div>
	<div id="twoGPwdCon" class="wdsSsidPwdInput passwordCon"></div>
</div>
<div id="router1Con" class="disNone">
	<div class="subTitle">
		<h2>5G Wi-Fi</h2>
	</div>
	<div id="fiveGSsidCon" class="wdsSsidPwdInput"></div>
	<div id="fiveGPwdCon" class="wdsSsidPwdInput passwordCon"></div>
</div>
<div id="router2Con" class="disNone">
	<div class="subTitle">
		<h2>5G1 Wi-Fi</h2>
	</div>
	<div id="fiveG1SsidCon" class="wdsSsidPwdInput"></div>
	<div id="fiveG1PwdCon" class="wdsSsidPwdInput passwordCon"></div>
</div>
<div id="router3Con" class="disNone">
	<div class="subTitle">
		<h2>5G2 Wi-Fi</h2>
	</div>
	<div id="fiveG2SsidCon" class="wdsSsidPwdInput"></div>
	<div id="fiveG2PwdCon" class="wdsSsidPwdInput passwordCon"></div>
</div>
<div class="wdsScanStepBtn">
	<div id="wdsBtnBack"></div>
	<div id="wdsBtnNext"></div>
</div><script type="text/javascript">(function(){function s(){t();g=[];h=[];if(slp.bandSteeringProvided&&"1"==gLocalAPInfo[FREQ_BS].bs_enable){var d,c;for(c in targetSelFreq)if(targetSelFreq[c].selected&&targetSelFreq[c].status==uciWireless.dynOptValue.status.connected){d=gRootAPInfo[c];break}$("#router4Con").removeClass("disNone");l.setValue(d.ssid);k.setValue("0"==d.encryption?"":d.key);g.push(l);h.push(k)}else for(c in targetSelFreq)if(targetSelFreq[c].selected&&targetSelFreq[c].status==uciWireless.dynOptValue.status.connected)switch($("#router"+
c+"Con").removeClass("disNone"),parseInt(c)){case FREQ_2G:n.setValue(gRootAPInfo[c].ssid);p.setValue("0"==gRootAPInfo[c].encryption?"":gRootAPInfo[c].key);g.push(n);h.push(p);break;case FREQ_5G:q.setValue(gRootAPInfo[c].ssid);r.setValue("0"==gRootAPInfo[c].encryption?"":gRootAPInfo[c].key);g.push(q);h.push(r);break;case FREQ_5G1:fiveG1SsidInput.setValue(gRootAPInfo[c].ssid);fiveG1PwdInput.setValue("0"==gRootAPInfo[c].encryption?"":gRootAPInfo[c].key);g.push(fiveG1SsidInput);h.push(fiveG1PwdInput);
break;case FREQ_5G4:fiveG2SsidInput.setValue(gRootAPInfo[c].ssid);fiveG2PwdInput.setValue("0"==gRootAPInfo[c].encryption?"":gRootAPInfo[c].key);g.push(fiveG2SsidInput);h.push(fiveG2PwdInput);break;case FREQ_BS:l.setValue(gRootAPInfo[c].ssid),k.setValue("0"==gRootAPInfo[c].encryption?"":gRootApInfo[c].key),g.push(l),h.push(k)}}function t(){for(var d=FREQ_2G;d<=FREQ_BS;d++)$("#router"+d+"Con").addClass("disNone")}function v(){t();g=[];h=[];var d=[];d[FREQ_2G]={ssid:"",encryption:"",key:"",enable:""};
d[FREQ_5G]={ssid:"",encryption:"",key:"",enable:""};d[FREQ_5G1]={ssid:"",encryption:"",key:"",enable:""};d[FREQ_5G4]={ssid:"",encryption:"",key:"",enable:""};d[FREQ_BS]={ssid:"",encryption:"",key:"",wifi_enable:"",bs_enable:""};var c={wireless:{name:["wlan_host_2g","wlan_host_5g"]}};slp.bandSteeringProvided&&c.wireless.name.push("wlan_bs");$.query(c,function(c){$.each(gKeyNames[slp.bandsProvided-1].wlan_host,function(e,f){null!=f&&(d[e].enable=c.wireless[f].enable,d[e].ssid=c.wireless[f].ssid,d[e].encryption=
c.wireless[f].encryption,d[e].key=c.wireless[f].key)});slp.bandSteeringProvided&&(d[BAND_STEER].wifi_enable=c.wireless.wlan_bs.wifi_enable,d[BAND_STEER].bs_enable=c.wireless.wlan_bs.bs_enable,d[BAND_STEER].ssid=c.wireless.wlan_bs.ssid,d[BAND_STEER].encryption=c.wireless.wlan_bs.encryption,d[BAND_STEER].key=c.wireless.wlan_bs.key);if("1"==d[BAND_STEER].bs_enable)$("#router4Con").removeClass("disNone"),l.setValue(d[BAND_STEER].ssid),k.setValue("0"==d[BAND_STEER].encryption?"":d[BAND_STEER].key),g.push(l),
h.push(k);else for(var f=FREQ_2G;f<FREQ_BS;f++)if("1"==d[f].enable)switch($("#router"+f+"Con").removeClass("disNone"),parseInt(f)){case FREQ_2G:n.setValue(d[f].ssid);p.setValue("0"==d[f].encryption?"":gRootAPInfo[f].key);g.push(n);h.push(p);break;case FREQ_5G:q.setValue(d[f].ssid);r.setValue("0"==d[f].encryption?"":gRootAPInfo[f].key);g.push(q);h.push(r);break;case FREQ_5G1:fiveG1SsidInput.setValue(d[f].ssid);fiveG1PwdInput.setValue("0"==d[f].encryption?"":gRootAPInfo[f].key);g.push(fiveG1SsidInput);
h.push(fiveG1PwdInput);break;case FREQ_5G4:fiveG2SsidInput.setValue(d[f].ssid),fiveG2PwdInput.setValue("0"==d[f].encryption?"":gRootAPInfo[f].key),g.push(fiveG2SsidInput),h.push(fiveG2PwdInput)}})}var g=[],h=[];new CheckBox({targetId:"frontCheckBox",label:"同步前端路由Wi_Fi名称和密码",onClick:function(){this.checked?s():v()},checked:!0});var l=new Input({type:Input.TYPE.PLAIN_TEXT,label:{value:label.wirelessName},targetId:"wdsSsidCon",check:{blur:checkSsidInput},props:{maxlength:"32",type:"text"}}),k=new Input({type:Input.TYPE.CIPHER_TEXT,
label:{value:label.wirelessPwd},targetId:"wdsPwdCon",check:{blur:onPwdBlur,keyup:onPwdKeyup},props:{maxlength:"63",type:"text"}}),n=new Input({type:Input.TYPE.PLAIN_TEXT,label:{value:label.wirelessName2G},targetId:"twoGSsidCon",check:{blur:checkSsidInput},props:{maxlength:"32",type:"text"}}),p=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.wirelessPwd},targetId:"twoGPwdCon",check:{blur:onPwdBlur,keyup:onPwdKeyup},props:{maxlength:"63",type:"text"}}),q=new Input({type:Input.TYPE.PLAIN_TEXT,
label:{value:label.wirelessName5G},targetId:"fiveGSsidCon",check:{blur:checkSsidInput},props:{maxlength:"32",type:"text"}}),r=new Input({type:Input.TYPE.CIPHER_TEXT,label:{value:label.wirelessPwd},targetId:"fiveGPwdCon",check:{blur:onPwdBlur,keyup:onPwdKeyup},props:{maxlength:"63",type:"text"}});s();new Button({text:btn.preStep,onClick:function(){stepPage(firstPage)},type:Button.TYPE.SECONDARY,id:"wdsBtnBack",props:{width:"120px"}});new Button({text:btn.finish,onClick:function(){function d(){var c=
{};c.wireless=k;c.network=f;c.dhcpd=l;c.system={sys_mode:{mode:uciSystem.optValue.sysMode.wdsMode}};var a;if(!0==bWirelessLinked){$("#wdsWRLocalApSsid").hide();if(gRootAPInfo[b]&&"1"==gRootAPInfo[b].bs_enable)a=initStaticTextObj(label.wirelessName,htmlEscape(gRootAPInfo[b].ssid)),a.title=gRootAPInfo[b].ssid,$("div.wdsWirelessResult div.wdsRootAp").append(a),a=initStaticTextObj(label.wirelessPwd,htmlEscape(""==gRootAPInfo[b].key?label.wirelessNoSecurity:gRootAPInfo[b].key)),a.title=""==gRootAPInfo[b].key?
"":gRootAPInfo[b].key,$("div.wdsWirelessResult div.wdsRootAp").append(a);else for(var b=0;b<=gRootAPInfo.length;b++)if(gRootAPInfo[b]&&"1"==gRootAPInfo[b].enable)switch(b){case FREQ_2G:a=initStaticTextObj("2.4G Wi-Fi名称",htmlEscape(gRootAPInfo[b].ssid));a.title=gRootAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsRootAp").append(a);a=initStaticTextObj("2.4G Wi-Fi密码",htmlEscape(0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key));a.title=0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key;$(a).css("margin-bottom",
"0px");$("div.wdsWirelessResult div.wdsRootAp").append(a);break;case FREQ_5G:a=initStaticTextObj("5G Wi-Fi名称",htmlEscape(gRootAPInfo[b].ssid));a.title=gRootAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsRootAp").append(a);a=initStaticTextObj("5G Wi-Fi密码",htmlEscape(0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key));a.title=0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key;$(a).css("margin-bottom","0px");$("div.wdsWirelessResult div.wdsRootAp").append(a);break;case FREQ_5G1:a=initStaticTextObj("5G1 Wi-Fi名称",
htmlEscape(gRootAPInfo[b].ssid));a.title=gRootAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsRootAp").append(a);a=initStaticTextObj("5G1 Wi-Fi密码",htmlEscape(0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key));a.title=0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key;$(a).css("margin-bottom","0px");$("div.wdsWirelessResult div.wdsRootAp").append(a);break;case FREQ_5G4:a=initStaticTextObj("5G4 Wi-Fi名称",htmlEscape(gRootAPInfo[b].ssid)),a.title=gRootAPInfo[b].ssid,$("div.wdsWirelessResult div.wdsRootAp").append(a),
a=initStaticTextObj("5G4 Wi-Fi密码",htmlEscape(0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key)),a.title=0==gRootAPInfo[b].encryption?"":gRootAPInfo[b].key,$(a).css("margin-bottom","0px"),$("div.wdsWirelessResult div.wdsRootAp").append(a)}if(gLocalAPInfo[FREQ_BS]&&"1"==gLocalAPInfo[FREQ_BS].bs_enable)a=initStaticTextObj(label.wirelessName,htmlEscape(gLocalAPInfo[FREQ_BS].ssid)),a.title=gLocalAPInfo[FREQ_BS].ssid,$("div.wdsWirelessResult div.wdsLocalAp").append(a),a=initStaticTextObj(label.wirelessPwd,
htmlEscape(""==gLocalAPInfo[FREQ_BS].key?label.wirelessNoSecurity:gLocalAPInfo[FREQ_BS].key)),a.title=""==gLocalAPInfo[FREQ_BS].key?"":gLocalAPInfo[FREQ_BS].key,$("div.wdsWirelessResult div.wdsLocalAp").append(a);else for(b=0;b<=gLocalAPInfo.length;b++)if(gLocalAPInfo[b]&&"1"==gLocalAPInfo[b].enable)switch(b){case FREQ_2G:a=initStaticTextObj("2.4G Wi-Fi名称",htmlEscape(gLocalAPInfo[b].ssid));a.title=gLocalAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsLocalAp").append(a);a=initStaticTextObj("2.4G Wi-Fi密码",
htmlEscape(""==gLocalAPInfo[b].key?label.wirelessNoSecurity:gLocalAPInfo[b].key));a.title=""==gLocalAPInfo[b].key?"":gLocalAPInfo[b].key;$(a).css("margin-bottom","0px");$("div.wdsWirelessResult div.wdsLocalAp").append(a);break;case FREQ_5G:a=initStaticTextObj("5G Wi-Fi名称",htmlEscape(gLocalAPInfo[b].ssid));a.title=gLocalAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsLocalAp").append(a);a=initStaticTextObj("5G Wi-Fi密码",htmlEscape(""==gLocalAPInfo[b].key?label.wirelessNoSecurity:gLocalAPInfo[b].key));
a.title=""==gLocalAPInfo[b].key?"":gLocalAPInfo[b].key;$(a).css("margin-bottom","0px");$("div.wdsWirelessResult div.wdsLocalAp").append(a);break;case FREQ_5G1:a=initStaticTextObj("5G1 Wi-Fi名称",htmlEscape(gLocalAPInfo[b].ssid));a.title=gLocalAPInfo[b].ssid;$("div.wdsWirelessResult div.wdsLocalAp").append(a);a=initStaticTextObj("5G1 Wi-Fi密码",htmlEscape(""==gLocalAPInfo[b].key?label.wirelessNoSecurity:gLocalAPInfo[b].key));a.title=""==gLocalAPInfo[b].key?"":gLocalAPInfo[b].key;$(a).css("margin-bottom",
"0px");$("div.wdsWirelessResult div.wdsLocalAp").append(a);break;case FREQ_5G4:a=initStaticTextObj("5G4 Wi-Fi名称",htmlEscape(gLocalAPInfo[b].ssid)),a.title=gLocalAPInfo[b].ssid,$("div.wdsWirelessResult div.wdsLocalAp").append(a),a=initStaticTextObj("5G4 Wi-Fi密码",htmlEscape(""==gLocalAPInfo[b].key?label.wirelessNoSecurity:gLocalAPInfo[b].key)),a.title=""==gLocalAPInfo[b].key?"":gLocalAPInfo[b].key,$(a).css("margin-bottom","0px"),$("div.wdsWirelessResult div.wdsLocalAp").append(a)}a=initStaticTextObj(label.lanIPAddr,
gLanIP);$(a).css("margin-bottom","0px");$("div.wdsWirelessResult div.wdsLocalAp").append(a);$.modify(c,function(a){u.show()})}else loadingDialog.show({title:label.savingConfig,content:{primary:label.savingAndWait}}),$.modify(c,function(a){$.action({network:{apply_lan_config:null},wireless:{wds_finish:null}},null,!0,!0);var b=$.setTimeout(function(){window.location.href="http://"+gLanIP},6E4);!0==isLanIpChanged?($.changeDomain(gLanIP),$.setTimeout(function(){lanDetecting(function(){window.location.href=
"http://"+gLanIP})},4E3)):$.setTimeout(function(){lanDetecting(function(){clearTimeout(b);loadingDialog.hide(function(){menuLoad("WanLoader.htm")})})},4E3)})}var c=!0;g.forEach(function(d){c=d.checkAll()&&c});h.forEach(function(d){c=d.checkAll()&&c});if(c){for(var l={udhcpd:{enable:"0",auto:"1"}},f={lan:{ipaddr:gLanIP,netmask:gLanMask,ip_mode:"dynamic"}},e={},k={},m=0;m<g.length;m++)switch(e={},""==h[m].getValue()?(e.encryption="0",e.key=""):(e.encryption="1",e.key=h[m].getValue()),e.ssid=g[m].getValue(),
g[m]._ops.targetId){case "wdsSsidCon":k.wlan_bs=e;gLocalAPInfo[FREQ_BS].key=e.key;gLocalAPInfo[FREQ_BS].encryption=e.encryption;gLocalAPInfo[FREQ_BS].ssid=e.ssid;break;case "twoGSsidCon":k.wlan_host_2g=e;gLocalAPInfo[FREQ_2G].key=e.key;gLocalAPInfo[FREQ_2G].encryption=e.encryption;gLocalAPInfo[FREQ_2G].ssid=e.ssid;break;case "fiveGSsidCon":k.wlan_host_5g=e;gLocalAPInfo[FREQ_5G].key=e.key;gLocalAPInfo[FREQ_5G].encryption=e.encryption;gLocalAPInfo[FREQ_5G].ssid=e.ssid;break;case "fiveG1SsidCon":k.wlan_host_5g_1=
e;gLocalAPInfo[FREQ_5G1]=e.key;gLocalAPInfo[FREQ_5G1]=e.encryption;gLocalAPInfo[FREQ_5G1]=e.ssid;break;case "fiveG2SsidCon":k.wlan_host_5g_4=e,gLocalAPInfo[FREQ_5G4]=e.key,gLocalAPInfo[FREQ_5G4]=e.encryption,gLocalAPInfo[FREQ_5G4]=e.ssid}d()}},type:Button.TYPE.PRIMARY,id:"wdsBtnNext",props:{width:"240px"}});var u=new Dialog({hasTitle:!1,content:"<div id='wirelessLinkTipsCon'></div>",size:Dialog.SIZE.LARGE,type:Dialog.TYPE.CUSTOM,renderCallBack:function(){var d=this;loadDialogRenderPage(wirelessResultPage,
"wirelessLinkTipsCon",function(){$(".wdsWirelessResultText .desc").html("中继成功，请重新连接Wi-Fi：");d.connetcAndRetry=new Button({text:btn.iAmConnectRouter,onClick:function(){$.action({network:{apply_lan_config:null}},null,!0,!0);!0==isLanIpChanged?($.changeDomain(gLanIP),window.location.href="http://"+gLanIP):u.hide(function(){menuLoad("WanLoader.htm")})},type:Button.TYPE.PRIMARY,id:"connetcAndRetry",props:{width:"280px",display:"block",margin:"24px auto 0px"}});var c=new NiceScroll({targetId:"wdsRootAp",
zIndex:1006});c.scrollTipOpacity(1);c.init();c=new NiceScroll({targetId:"wdsLocalAp",zIndex:1006});c.scrollTipOpacity(1);c.init()})}});isLanIpChanged=gLanIP!=gOldLanIP})();
</script><style type="text/css">#wirelessLinkTipsCon{padding:40px 136px 40px}#setCurRouterInfo{font-size:13px;color:#666;line-height:20px;font-weight:400}#frontCheckBox{margin-top:26px;margin-bottom:18px}#frontCheckBox span{font-size:13px;color:#333;line-height:15px;font-weight:bold}</style>