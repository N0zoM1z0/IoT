<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="proma" content="no-cache"><meta http-equiv="cache-control" content="no cache"><meta http-equiv="expires" content="0"><meta content="width=device-width,initial-scale=1,user-scalable=no" name="viewport"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="/static/css/phone/style.css"></head><body><div id="app"></div><script type="text/x-template" id="main"><div>
  <div class="toper">
	<phone-back url="/phone/home.html" :title="lang_t('menu.wifi')"></phone-back>
  </div>  
  <div class="content">
  	<div class="group" v-if="wifiDualband != '0'">
	  <div class="item-sw"><b>{{ lang_t('wifi.merge') }}</b></div>
	  <div class="item-r">
		<x-switch v-model="merge" @change="mergeChange" :disabled="mergeAbled"></x-switch>
	  </div>
	</div>
	<wifi-set :enable-dis="wifiSchEnabled2g||rptIdx=='0'" :state-text="!merge && wifiDualband != '0'?' 2.4GHz':''" v-model="wifi2Param"></wifi-set>
    <div v-show="!merge" v-if="wifiDualband != '0'">
		<wifi-set :enable-dis="wifiSchEnabled5g||rptIdx=='1'" :state-text="wifiDualband == '1'?' 5GHz':' 5GHz (1)'" type="1" v-model="wifi5Param"></wifi-set>
	</div>
    <div v-show="!merge" v-if="wifiDualband == '2'">
		<wifi-set :enable-dis="wifiSchEnabled5g2" state-text="5GHz (2)" type="2" v-model="wifi52Param"></wifi-set>
	</div>
  </div>
  <div class="footer">
	<button class="btn" @click="applyFun">{{ lang_t('common.apply') }}</button>
  </div>
</div></script><script src="/plugin/vue.js"></script><script src="/plugin/jquery.min.js"></script><script src="/static/js/config.js"></script><script src="/static/js/phone_layout.js"></script><script src="/static/js/common.js"></script><script src="/static/js/topicurl.js"></script><script>Vue.component("wifi-set",{template:'\t\t<div>\t\t\t<div class="space"></div>\t\t\t<div class="space"></div>\t\t\t<div class="group" v-if="!globalConfig.meshPairSupport" >\t\t\t\t<div class="item-sw"><b>{{ lang_t(\'wifi.wireless\') + stateText }}</b></div>\t\t\t\t<div class="item-r">\t\t\t\t\t<x-switch v-model="wifi.enable" :disabled="enableDis"></x-switch>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group" v-if="globalConfig.meshPairSupport&&stateText" >\t\t\t\t<div class="item-sw"><b>{{ lang_t(\'wifi.wireless\') + stateText }}</b></div>\t\t\t</div>\t\t\t<div class="group">\t\t\t\t<div class="item-l">{{lang_t(\'wifi.ssid\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<input type="text" v-model="wifi.ssid" maxlength="32" :disabled="!wifi.enable">\t\t\t\t</div>\t\t\t</div>\t\t\t<div v-if="wifiEncryptSupport">\t\t\t\t<div class="group">\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.encryption\') }}</div>\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t\t<select v-model="wifi.ew" :disabled="!wifi.enable" @change="ewChange()">\t\t\t\t\t\t\t\t<option value="0">{{ lang_t(\'rule.off\') }}</option>\t\t\t\t\t\t\t\t<option value="1" v-if="globalConfig.wifiWepSupport">{{ lang_t(\'wifi.open_key\') }}</option>\t\t\t\t\t\t\t\t<option value="2" v-if="globalConfig.wifiWepSupport">{{ lang_t(\'wifi.shared_key\') }}</option>\t\t\t\t\t\t\t\t<option value="3">WPA-PSK</option>\t\t\t\t\t\t\t\t<option value="4">WPA2-PSK</option>\t\t\t\t\t\t\t\t<option value="5">WPA/WPA2-PSK ({{lang_t(\'common.recommend\')}})</option>\t\t\t\t\t\t\t\t<option value="6" v-if="globalConfig.wifiWpa3Support">WPA3-SAE</option>\t\t\t\t\t\t\t\t<option value="7" v-if="globalConfig.wifiWpa3Support">WPA2/WPA3-SAE</option>\t\t\t\t\t\t\t</select>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t\t<div v-show="wifi.ew!=0">\t\t\t\t\t<div class="group">\t\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.encryption_type\') }}</div>\t\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t\t\t<select v-model="wifi.et" :disabled="!wifi.enable">\t\t\t\t\t\t\t\t\t<option v-for="data in passTypeOp" :value="data.value">{{data.name}}</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t<div class="group" v-show="wifi.ew==1||wifi.ew==2">\t\t\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.pass_type\') }}</div>\t\t\t\t\t\t<div class="item-r">\t\t\t\t\t\t\t\t<select v-model="wifi.kt" :disabled="!wifi.enable">\t\t\t\t\t\t\t\t\t<option value="0">HEX</option>\t\t\t\t\t\t\t\t\t<option value="1">ASCII</option>\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group" v-show="(wifiEncryptSupport&&wifi.ew!=0)||!wifiEncryptSupport">\t\t\t\t<div class="item-l">{{ lang_t(\'wifi.pass\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<input type="text" v-model="wifi.key" v-pass :maxlength="passMaxLen" :disabled="!wifi.enable">\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group">\t\t\t\t<div class="item-sw">{{ lang_t(\'wifi.hide_ssid\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<x-switch v-model="wifi.hssid" :disabled="!wifi.enable"></x-switch>\t\t\t\t</div>\t\t\t</div>\t\t\t<div class="group" v-if="wifi.hssid&&(globalConfig.meshBhBss||globalConfig.meshPairSupport||globalConfig.meshAcManageSupport)">\t\t\t\t<div class="item-l" style="color:#43a7ff;">{{ lang_t(\'wifi.hssid_info\') }}</div>\t\t  \t</div>\t\t\t<div class="group" v-if="globalConfig.wifiWpa3Support && !wifiEncryptSupport">\t\t\t\t<div class="item-sw">{{ lang_t(\'wifi.wpa3\') }}</div>\t\t\t\t<div class="item-r">\t\t\t\t\t<x-switch v-model="wifi.wpa" :disabled="!wifi.enable||!wifi.key"></x-switch>\t\t\t\t</div>\t\t  \t</div>\t\t\t<div class="group" v-if="wifi.wpa || wifi.ew == 6 || wifi.ew == 7">\t\t\t\t<div class="item-l" style="color:#43a7ff;">{{ globalConfig.wpsSupport ? lang_t("wifi.wpa3_info") : lang_t(\'wifi.wpa3_info_nowps\') }}</div>\t\t  \t</div>\t\t\t<div v-if="wifi.wpa  || wifi.ew==6 || wifi.ew == 7">&nbsp;</div>\t\t\t<div v-if="wifi.wpa  || wifi.ew==6 || wifi.ew == 7">&nbsp;</div>\t\t\t<div v-if="wifi.wpa  || wifi.ew==6 || wifi.ew == 7">&nbsp;</div>\t\t</div>\t\t',props:{params:{default:function(){return{}}},stateText:{default:""},enableDis:{default:!1},type:{default:0}},model:{prop:"params"},data:function(){return{wifi:{enable:!1,ssid:"",key:"",hssid:!1,wpa:!1,kt:"",et:"",ew:"0"},enableDis:!1,wifiEncryptSupport:!1}},updated:function(){this.wifiEncryptSupport&&(this.wifi.passLen=this.passMaxLen),this.$emit("input",this.wifi)},watch:{params:function(){$.extend(this.wifi,this.params)}},computed:{passMaxLen:function(){var t,i,a,e=63;return this.wifiEncryptSupport&&(t=this.wifi.kt,i=this.wifi.et,a=this.wifi.ew,0!=t||3!=a&&4!=a&&5!=a?"1"==i?e="0"==t?10:5:"2"==i&&(e="0"==t?26:13):e=64),this.wifi.key.length>e&&(this.wifi.key=""),e},passTypeOp:function(){var t=["WEP-64","WEP-128","TKIP","AES","TKIP/AES"],i=[];switch(this.wifi.ew.toString()){case"1":case"2":i=[0,1];break;case"3":i=[2];break;case"4":case"5":i=[3,4];break;case"6":case"7":i=[3]}0==this.type&&6==this.wifi.band&&(i=[3]);for(var a=0;a<i.length;a++)i[a]={value:i[a]+1,name:t[i[a]]};return i}},created:function(){this.wifiEncryptSupport=globalConfig.wifiEncryptSupport,$.extend(this.wifi,this.params)},methods:{ewChange:function(){switch(this.wifi.ew.toString()){case"1":case"2":this.wifi.et="1";break;case"3":this.wifi.et="3";break;case"4":this.wifi.et="4";break;case"5":this.wifi.et="5";break;case"6":case"7":globalConfig.wpsSupport?Cstool.Mark({content:lang_t("wifi.wpa3_info"),l_text:lang_t("common.ok")}):Cstool.Mark({content:lang_t("wifi.wpa3_info_nowps"),l_text:lang_t("common.ok")}),this.wifi.et="4"}this.wifi.kt="1"}}});var cs_main={template:"#main",data:function(){return{globalConfig:globalConfig,lang:$.lang,lang_t:lang_t,data:[],merge:!1,wifiDualband:"0",wifiSchEnabled:!1,wifiSchEnabled2g:!1,wifiSchEnabled5g:!1,wifiSchEnabled5g2:!1,mergeAbled:!1,wifi2Param:{},wifi5Param:{},wifi52Param:{},wifiEncryptSupport:!1,rptIdx:""}},created:function(){var e=this;this.wifiEncryptSupport=globalConfig.wifiEncryptSupport,uiPost.getWiFiEasyCfg(function(a){"rpt"==globalConfig.opmode&&(e.rptIdx=a.rptIdx),"rpt"!=globalConfig.opmode&&"wisp"!=globalConfig.opmode?e.merge="1"==a.merge:e.mergeAbled=!0,"1"!=a.rpt_enable&&"1"!=a.wifiSchEnabled2g||(e.wifiSchEnabled2g=!0),"1"!=a.rpt_enable_5g&&"1"!=a.wifiSchEnabled5g||(e.wifiSchEnabled5g=!0);function t(t,i){e[t]={ssid:a["ssid"+i],key:a["key"+i],hssid:"1"==a["hssid"+i],enable:"1"!=a["wifiOff"+i],wpa:"2"==a["wpaMode"+i],band:a["band"+i]},globalConfig.wifiEncryptSupport&&(e[t].ew=a["encryptionWay"+i]||"0",e[t].et=a["encryptionType"+i],e[t].kt=a["keyType"+i])}e.wifiDualband=a.wifiDualband,t("wifi2Param",""),"0"!=e.wifiDualband&&t("wifi5Param","5g"),"2"==e.wifiDualband&&t("wifi52Param","5g2")})},methods:{mergeChange:function(t){this.wifi5Param.ssid=t?this.wifi2Param.ssid:this.wifi5Param.ssid+"-5G"},errorFun:function(t){Cstool.Mark({content:t,l_text:this.lang_t("common.back")})},verifyData:function(t,i,a){var e=this.errorFun;if(t.enable){if(0==(n=cs.ssid(t.ssid)))return e(i+lang_t("wifi.msg1")),!1;if(4==n)return e(i+lang_t("wifi.msg18")),!1;if(5==n)return e(i+lang_t("wifi.msg5")),!1;if(1==n)return e(i+lang_t("wifi.msg2")),!1;if(2==n)return e(i+lang_t("wifi.msg3")),!1;if(this.wifiEncryptSupport&&"0"==t.ew)return!0;var s=t.key,n=cs.string(s);if(this.wifiEncryptSupport){if(0==n)return e(i+lang_t("wifi.pass")+lang_t("wifi.msg6")),!1;if(63!=t.passLen)return"1"!=t.kt||s.length==t.passLen&&99==n?!!("0"!=t.kt||s.length==t.passLen&&/^[\da-fA-F]+$/.test(s))||(e(i+lang_t("wifi.pass_16",[t.passLen])),!1):(e(i+lang_t("wifi.pass_ascii",[t.passLen])),!1)}if(this.wifiEncryptSupport&&"0"==t.kt)return!(!/^[\da-fA-F]+$/.test(s)||s.length!=t.passLen)||(e(i+lang_t("wifi.pass_16",[t.passLen])),!1);passwordVerify("wifi",i+lang_t("wifi.pass"),s,function(t){if(t)throw Cstool.Mark({content:t,l_text:lang_t("common.back")}),"err"},0!=n||this.wifiEncryptSupport)}},applyFun:function(){function t(t,i){a["ssid"+i]=t.ssid,globalConfig.wifiWpa3Support&&!globalConfig.wifiEncryptSupport&&(a["wpaMode"+i]=t.wpa?"2":"1"),a["wifiOff"+i]=t.enable?"0":"1",a["hssid"+i]=t.hssid?"1":"0",globalConfig.wifiEncryptSupport&&(a["encryptionWay"+i]=t.ew,"0"==a["encryptionWay"+i]?(a["encryptionType"+i]="0",a["key"+i]=""):(a["encryptionType"+i]=t.et,a["key"+i]=t.key),a["keyType"+i]=t.kt)}var a={};if(t(this.wifi2Param,""),0!=this.verifyData(this.wifi2Param,"")){if(a.merge=this.merge?"1":"0","0"!=this.wifiDualband)if(this.merge)t(this.wifi2Param,"5g"),"2"==this.wifiDualband&&t(this.wifi2Param,"5g2");else{if(t(this.wifi5Param,"5g"),0==this.verifyData(this.wifi5Param,"2"==this.wifiDualband?"5G (1) ":"5G "))return;if("2"==this.wifiDualband&&(t(this.wifi52Param,"5g2"),0==this.verifyData(this.wifi52Param,"5GHz (2) ")))return}function i(){uiPost.setWiFiEasyCfg(a,function(t){var i=30;t.wtime&&"0"!=t.wtime&&(i=Number(t.wtime)),Cstool.Mark({type:"load",time:i,content:lang_t("common.effective"),success:function(){Cstool.Flag({content:lang_t("common.success_relink"),btnText:lang_t("common.back"),ok:function(){location.reload()}})}})})}this.wifiEncryptSupport||("0"!=this.wifiDualband||this.wifi2Param.key)&&("1"!=this.wifiDualband||this.wifi5Param.key&&this.wifi2Param.key)&&("2"!=this.wifiDualband||this.wifi5Param.key&&this.wifi2Param.key&&this.wifi52Param.key)?i():Cstool.Mark({content:lang_t("wifi.msg14"),cancel:function(){i()}})}}}}</script><script src="/static/js/main.js"></script></body></html>