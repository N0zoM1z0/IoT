var showLanguage=[],lang_select="",initData={},languages={auto:"自动检测",en:"English",cn:"简体中文",ct:"繁體中文",ru:"Русский",vn:"Tiếng Việt",vi:"Tiếng Việt",jp:"日本語",kr:"한국어",es:"Español",de:"Deutsch",th:"ภาษาไทย",fr:"Français"};function autoText(a){var e="Auto";return"ct"==a?e="自動偵測":"cn"==a?e="自动检测":"ru"==a?e="Авто":"vn"!=a&&"vi"!=a||(e="Tự động"),e}function changeLanguage(){var a=kr.get("language"),e="0",a=("auto"==a&&(a=getAuto(),e="1"),getLanguage(a),processText(),"1"==initData.showAutoLang&&(kr.elm("language").options[0].innerHTML=autoText(a)),0<=location.href.indexOf("wan_ie.html")&&linkType(),{topicurl:"setLanguageCfg",lang:a,langAutoFlag:e});kr.request({type:"POST",url:"/cgi-bin/cstecgi.cgi",data:a})}function getAuto(){var a=(navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage).toLowerCase(),e=initData.showLanguage,t=!1;if("zh-tw"==a||"zh-hk"==a)a="ct";else if("zh-cn"==a||"zh"==a||"zh-sg"==a)a="cn";else if("en"==a||"en-us"==a||"en-gb"==a)a="en";else if("ja"==a)a="jp";else if("be"==a||"ru"==a||"ru-md"==a||"ru-ru"==a)a="ru";else if("vi"==a||"vn"==a||"vi-vn"==a){for(var n=0;n<e.length;n++)if("vn"===e[n]){t=!0;break}a=t?"vn":"vi"}return a}window,kr.request({type:"POST",url:"/cgi-bin/cstecgi.cgi",async:!1,data:{topicurl:"getInitCfg"},success:function(a){showLanguage=(initData=a).showLanguage.split(",");var e=initData.defaultLang,t=!1,n=("1"==initData.showAutoLang&&(showLanguage.splice(0,0,"auto"),"1"==initData.langAutoFlag&&(e=getAuto(),t=!0),languages.auto=autoText(e)),"bg-style");a.styleType&&"0"!=a.styleType&&(n="bg-style"+a.styleType),document.body.className=n,a.webTitle&&(document.title=a.webTitle),lang_select='<select id="language" onchange="changeLanguage()">';for(var g=0;g<showLanguage.length;g++)for(var i in languages)showLanguage[g]==i&&(lang_select+="auto"==i&&t||e==i&&!t?'<option value="'+i+'" selected>'+languages[i]+"</option>":'<option value="'+i+'">'+languages[i]+"</option>");lang_select+="</select>",getLanguage(e)}});