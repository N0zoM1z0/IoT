
<html>
<head>
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<link rel="stylesheet" rev="stylesheet" href="/css/content.css" type="text/css">
<script language="javascript" src="/js/jquery.js"></script>
<script language="javascript" src="/js/t_utils.js"></script>
<script language="javascript" src="/js/init.js"></script>
<script language="javascript" src="/js/tri.js"></script>
<script language="javascript" src="/js/project.js"></script>
<script language="javascript">
var CAEnable=<!--#getsingle "InternetGatewayDevice.ManagementServer.X_TRI_CAEnable" -->;
function init(){
	var node_cert = getValue('TEXTAREA_IncertCert');
	if(CAEnable != 1 || node_cert.length == 0){
		$('TEXTAREA_IncertCert').value = "-----BEGIN CERTIFICATE-----\n<incert Certificate here>\n-----END CERTIFICATE-----";
	}
}

function checkTextLength(){
	var node_cert = getValue('TEXTAREA_IncertCert');
	var maxLength = 4500;
	if(node_cert.length > maxLength){
		nnode_cert = node_cert.substr(0,maxLength);
	}
}

function uiDelete(){
	var df = document.addtr69cfgdataform; 
	AddElements(df, "InternetGatewayDevice.ManagementServer.X_TRI_CAEnable", 0);
	AddElements(df, "InternetGatewayDevice.ManagementServer.X_TRI_CAFile", '');
	df.submit(); 
}

function uiSubmit(){
	var df = document.addtr69cfgdataform; 
	var node_cert = getValue('TEXTAREA_IncertCert');
	if (node_cert.length < 85)
		return;
	AddElements(df, "InternetGatewayDevice.ManagementServer.X_TRI_CAEnable", 1);
	AddElements(df, "InternetGatewayDevice.ManagementServer.X_TRI_CAFile", getValue('TEXTAREA_IncertCert'));
	df.submit(); 
}
function uiReturn(){
	document.location.href='/page/management/mngt_cwmp.shtml';	
}

function __init()
{
    init();
    if(IsExistedFunction("project_init") == true) 
        project_init(GetCurrentFileName());
}
</script>
</head>
<body>
<form>
<script>printBeginContent</script>
<script>SetContentTitle(getStr('LK_ImportCA'))</script>
<table width="800" cellpadding="0" cellspacing="0" class="ContentTableNoColor">
<tr class="FlagText">
	<td colspan="2" langkey="LK_CAText"></td>
</tr>
<tr class="spaceLine"><td colspan="2">&nbsp;</td></tr>
<tr>
	<td width="150" langkey="LK_CertificateTypee"></td>
	<td><select id="SELECT_Cert">
	<option value="acscert">acscert</option>
	</select>
	</td>
</tr>
<tr>
	<td langkey="LK_CertificateContentt"></td>
	<td><textarea cols="65" rows="20" id="TEXTAREA_IncertCert" onChange="checkTextLength()"><!--#getsingle "InternetGatewayDevice.ManagementServer.X_TRI_CAFile" --></textarea></td>
</tr>
</table>
<br>
<table class="ContetTableNoColor">
<tr>
	<td>
	<script>PrintTriButton("submit",getStr('LK_Apply'),"uiSubmit()");</script>&nbsp;
	<script>PrintTriButton("del",getStr('LK_DeleteCertificate'),"uiDelete()");</script>&nbsp;
	<script>PrintTriButton("rtn",getStr('LK_Back'),"uiReturn()");</script>
</td></tr>
	</form>
<form method="post" name ="addtr69cfgdataform" action="/cgi-bin/setup.cgi?page/management/mngt_addtr69cfg.shtml">
</form>
</body>
</html>
