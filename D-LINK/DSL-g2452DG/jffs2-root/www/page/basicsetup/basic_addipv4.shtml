
<html>
<head>
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<link rel="stylesheet" rev="stylesheet" href="/css/content.css" type="text/css">
<script language="javascript" src="/js/check.js"></script>
<script language="javascript" src="/js/jquery.js"></script>
<script language="javascript" src="/js/t_utils.js"></script>
<script language="javascript" src="/js/init.js"></script>
<script language="javascript" src="/js/tri.js"></script>
<script language="javascript" src="/js/project.js"></script>
<script language="javascript">
function ConnectionTuple(){
    this.path="";
    this.Chaddr="";
    this.Yiaddr="";
}

var index = 0;
var G_BandMacIp = new Array();
<!--#getobject "InternetGatewayDevice.LANDevice.1.LANHostConfigManagement.DHCPStaticAddress. Chaddr Yiaddr" -->
G_BandMacIp[index] = new ConnectionTuple();
G_BandMacIp[index].path = "<!--#path -->";
G_BandMacIp[index].Chaddr = "<!--#leaf "1"-->";
G_BandMacIp[index].Yiaddr = "<!--#leaf "2"-->";
index++;
<!--#endgetobject -->

<!--#getobject "InternetGatewayDevice.LANDevice.1.LANHostConfigManagement. MinAddress MaxAddress" -->
    var G_MinAddress = "<!--#leaf "1"-->";
    var G_MaxAddress = "<!--#leaf "2"-->";
<!--#endgetobject -->

function uiSubmit(){
    var df = document.addlandataform; 
    var nodes = $('INPUT_MacAddress','INPUT_IpAddress');
    var macaddr = $('INPUT_MacAddress');
    var ipvHost = $('INPUT_IpAddress');
    
    if(!ischeckMAC(macaddr)){            
        return false;
    }
    if(!isCheckIPV4(ipvHost,1,254)){            
        return false;
    }
    if(!validateCode())
        return false;

    for(i=0;i<G_BandMacIp.length;i++){
        var tmpmac = G_BandMacIp[i].Chaddr;
        if(tmpmac.toLowerCase() == macaddr.value.toLowerCase())
        {
            top.AlertMsg(getStr("LK_ReservedIPAddress_MACRepeat"));
            return false;
        }
        if(ipvHost.value == G_BandMacIp[i].Yiaddr)
        {
            top.AlertMsg(getStr("LK_ReservedIPAddress_IPRepeat"));
            return false;
        }
    }

    if(ipvHost.value > G_MaxAddress && ipvHost.value < G_MinAddress)
    {
        top.AlertMsg(getStr("LK_ReservedIPAddress_ErrRange"));
        return false;
    }

    AddElements(df, 'add_obj',"InternetGatewayDevice.LANDevice.1.LANHostConfigManagement.DHCPStaticAddress.");
    AddElements(df, "InternetGatewayDevice.LANDevice.1.LANHostConfigManagement.DHCPStaticAddress.{i}.Chaddr", nodes[0].value);
    AddElements(df, "InternetGatewayDevice.LANDevice.1.LANHostConfigManagement.DHCPStaticAddress.{i}.Yiaddr", nodes[1].value);
    df.submit();    
}
 
function uiDelete(path){
    if(!validateCode(2))
        return false;		
    var df = document.addlandataform; 
    AddElements(df, 'del_obj',path);
    df.submit(); 
}

function uiReturnPage(){
    document.location.href='/page/basicsetup/basic_lanipv4config.shtml';	
}
   
function createTable(){
    var trs = "";
    if(G_BandMacIp.length == 0)
        trs = "<tr class='OddRow'><td colspan='4'>"+getStr('LK_NoRule')+"</td></tr>";
    for(i=0;i<G_BandMacIp.length;i++){
        var tr = "";
        if(i%2 ==0)
            tr += '<tr class="OddRowB">';
        else
            tr += '<tr class="EvenRowB">';
        tr += "<td>"+(i+1)+"</td>";
        tr += "<td>"+G_BandMacIp[i].Chaddr+"</td>";
        tr += "<td>"+G_BandMacIp[i].Yiaddr+"</td>";
        tr += "<td><img src='../../skin/trash.gif' onclick='uiDelete(\"" +G_BandMacIp[i].path+ "\")'></td>"; 				
        tr += "</tr>";
        trs += tr; 			
    }
    jQuery("#tb_devippool").append(trs);
}	

function __init(){
    createTable();
    if(IsExistedFunction("project_init") == true) 
        project_init(GetCurrentFileName());
}
</script>
</head>
<body>
<script>printBeginContent();</script>
<script>SetContentTitle(getStr('LK_ReservedIPAddressSettings'))</script>
<form>
<table cellpadding="0" cellspacing="0" class="ContentTableNoColor" width="600">
<tr>
	<td width="150" langkey="LK_MACAddresss"></td>
	<td><input type="text" maxlength="17" id="INPUT_MacAddress"></td>
</tr>
<tr>
	<td langkey="LK_IPAddresss"></td>
	<td><input type="text" maxlength="15" id="INPUT_IpAddress"></td>
</tr>
<tr id="BUTTON_BLOCK" class="spaceLine"><td>&nbsp;</td></tr>
<tr>
	<td colspan="2">
		<script>PrintTriButton("Return",getStr("LK_Back"),"uiReturnPage()");</script>&nbsp;
		<script>PrintTriButton("add",getStr('LK_Add'),"uiSubmit()");</script>&nbsp;	
		<script>PrintTriButton("refresh",getStr("LK_uirefresh"),"uiPageRefresh()");</script>
	</td>
</tr>
</table>
<br>
<script>SetContentTitle('Reserved IP Addresses List')</script>
<table cellpadding="0" cellspacing="0" class="ContentTableNoColor" width="600">
<tr id="BUTTON_BLOCK2" class="spaceLine"><td>&nbsp;</td></tr>
</table>
<table width="600" id="tb_devippool" cellpadding="0" cellspacing="0" class="ContentBorder">
<tr class="TitleRow"> 
	<td id="number" langkey="LK_seque"></td>
	<td id="MACAddress" langkey="LK_MACAddress"></td>
	<td id="IPAddress" langkey="LK_IPAddress"></td>
	<td id="delete" langkey="LK_action"></td>   				
</tr>
</table> 
</form>	
<form method="post" name ="addlandataform" action="/cgi-bin/setup.cgi?page/basicsetup/basic_addipv4.shtml">
</form>
</body>
</html>
