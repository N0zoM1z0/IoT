
<html><head>
<link rel="stylesheet" rev="stylesheet" href="/css/content.css"type="text/css">
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<script language="javascript" src="/js/check.js"></script>
<script language="javascript" src="/js/jquery.js"></script>
<script language="javascript" src="/js/t_utils.js"></script>
<script language="javascript" src="/js/init.js"></script>
<script language="javascript" src="/js/tri.js"></script>
<script language='javascript' src='/js/project.js'></script>
<script language="javascript">
function staticConnectionTuple(){
    this.path="";
    this.Enable="";
    this.Status="";
    this.DestIPv6Address="";
    this.DestPrefixLength="";
    this.GatewayIPv6Address="";
    this.Interface="";
    this.ForwardingMetric="";
    this.StaticRoute="";
    this.ErrorInfo="";    
}
var index = 0;
var staticRoutingList = new Array();
<!--#getobject_noop "InternetGatewayDevice.X_CT-COM_IPv6Layer3Forwarding.IPv6Forwarding. Enable Status DestIPv6Address DestPrefixLength GatewayIPv6Address Interface ForwardingMetric StaticRoute X_CT-COM_ErrorInfo" -->
staticRoutingList[index] = new staticConnectionTuple();
staticRoutingList[index].path = "<!--#path -->";
staticRoutingList[index].Enable = "<!--#leaf "1"-->";
staticRoutingList[index].Status = "<!--#leaf "2"-->";
staticRoutingList[index].DestIPv6Address = "<!--#leaf "3"-->";
staticRoutingList[index].DestPrefixLength = "<!--#leaf "4"-->";
staticRoutingList[index].GatewayIPv6Address = "<!--#leaf "5"-->";
staticRoutingList[index].Interface = "<!--#leaf "6"-->";
staticRoutingList[index].ForwardingMetric = "<!--#leaf "7"-->";
staticRoutingList[index].StaticRoute = "<!--#leaf "8"-->";
staticRoutingList[index].ErrorInfo = '<!--#leaf "9"-->';
index++;
<!--#endgetobject -->

function ConnectionTuple()
{    /* common */
    this.Type = "";
    this.Path = "";
    this.Name = "";
    this.ServiceList = "";
    this.IPMode = ""
    this.ConnectionType = "";
    this.DeviceName="";
}

var n = 0;
var wanConnection = new Array();
<!--#getobject_noop "InternetGatewayDevice.WANDevice." -->
<!--#getobject_noop "InternetGatewayDevice.WANDevice.{i}.WANConnectionDevice." -->
<!--#getobject_noop "InternetGatewayDevice.WANDevice.{i}.WANConnectionDevice.{i}.WANIPConnection. Name X_CT-COM_ServiceList X_CT-COM_IPMode ConnectionType" -->
wanConnection[n] = new ConnectionTuple();
wanConnection[n].Type = "IP";
wanConnection[n].Path = "<!--#path -->";
wanConnection[n].Name = "<!--#leaf "1"-->";
wanConnection[n].ServiceList = "<!--#leaf "2"-->";
wanConnection[n].IPMode = "<!--#leaf "3"-->";
wanConnection[n].ConnectionType = "<!--#leaf "4"-->";
n++;
<!--#endgetobject -->

<!--#getobject_noop "InternetGatewayDevice.WANDevice.{i}.WANConnectionDevice.{i}.WANPPPConnection. Name X_CT-COM_ServiceList X_CT-COM_IPMode ConnectionType" -->
wanConnection[n] = new ConnectionTuple();
wanConnection[n].Type = "PPP";
wanConnection[n].Path = "<!--#path -->";
wanConnection[n].Name = "<!--#leaf "1"-->";
wanConnection[n].ServiceList = "<!--#leaf "2"-->";
wanConnection[n].IPMode = "<!--#leaf "3"-->";
wanConnection[n].ConnectionType = "<!--#leaf "4"-->";
n++;
<!--#endgetobject -->
<!--#endgetobject -->
<!--#endgetobject -->
    
//获取桥连接名
var m = 0;
<!--#getobject_noop "InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.1. Name" -->
    wanConnection[n] = new ConnectionTuple();
    wanConnection[n].Path = "InternetGatewayDevice.LANDevice.1.LANEthernetInterfaceConfig.1.";
    wanConnection[n].Name = "LAN";
    n++;
    m++;
<!--#endgetobject -->
var G_Operation = "Add";
var G_Path ;

function init(){        
}    
function uiAdd(){
    if(staticRoutingList.length<30){
        ConnIdx=(staticRoutingList.length+1);
        document.location.href='/page/advancedsetup/v6staticroute.shtml?id='+ConnIdx+'&Op='+ G_Operation+'';
    }else{
        top.AlertMsg(getStr("LK_net_max30item2"));
    }
}

function uiAddStatic()
{
    $('DIV_Static_Config').style.visibility = "visible";
    $('DIV_Static_Config').style.display = style_display_on(); 
    disableCtrl('selectConnectionName',false);
    if ($('selectConnectionName').size != 0)
        $('selectConnectionName').selectedIndex = 1;
}
function ConfirmMsgResult(type,func,a)
{
	if(func == 'delete')
	{
		if(type=='yes')
		{
			var df = document.ipv6_rtroutecfgdataform;
			df.submit();
		}
		else
		{
			return;
		}
	}
}
function uiDelete(path){
	if(!validateCode())
			return false;
    var df = document.ipv6_rtroutecfgdataform; 
    AddElements(df, 'del_obj',path);
    top.ConfirmMsg(getStr("LK_net_confirmdelete"),"delete");
}

function uiEdit(path,idx)
{    
    G_Path = path;
    G_Operation = "Edit";
    document.location.href='/page/advancedsetup/v6staticroute.shtml?id='+idx+'&Op='+ G_Operation+'&G_Path='+ path+'';
}

function uiSubmit(){       
    var df = document.ipv6_rtroutecfgdataform; 
    var node = $('selectConnectionName','INPUT_Enable','DestinationAddress','SubnetMask','staticRougingGateway','staticRougingMetrics');  
    if(!(checkIpv6($('DestinationAddress')))){           
        return false;
    }
    if(getValue('SubnetMask')<3 || getValue('SubnetMask')>128 || isAllNum(getValue('SubnetMask')) == 0 || getValue('SubnetMask') =="" ){           
        top.AlertMsg(getStr("LK_DiagCheck"));
        ErrFocus($('SubnetMask'));
        return false;
    }
    if(!(checkIpv6($('staticRougingGateway')))){           
        return false;
    }
    if(getValue('staticRougingMetrics')<3 || getValue('staticRougingMetrics')>128 || isAllNum(getValue('staticRougingMetrics')) == 0 || getValue('staticRougingMetrics') =="" ){           
        top.AlertMsg(getStr("LK_DiagCheck"));
        ErrFocus($('staticRougingMetrics'));
        return false;
    }      
    if(G_Operation == 'Add'){  
        var object_path="InternetGatewayDevice.X_CT-COM_IPv6Layer3Forwarding.IPv6Forwarding.{i}";     
        var wanConn = $('selectConnectionName').value;
        if(wanConn == ''){
            top.AlertMsg(getStr("LK_app_chooseWanConnect"));
            return false;
          }
          
        if($('INPUT_Enable').checked== false){
            AddElements(df, object_path+".Enable",0);
        }else {
            AddElements(df, object_path+".Enable",1);
        }
        var wanPath=wanConnection[wanConn].Path+wanConnection[wanConn].Name;
        AddElements(df, 'add_obj',object_path);
        AddElements(df, object_path+".Interface",wanPath);
        AddElements(df, object_path+".DestIPv6Address",getValue('DestinationAddress'));
        AddElements(df, object_path+".DestPrefixLength", getValue('SubnetMask'));
        AddElements(df, object_path+".GatewayIPv6Address", getValue('staticRougingGateway'));
        AddElements(df, object_path+".ForwardingMetric", getValue('staticRougingMetrics'));
    }else if(G_Operation == 'Edit'){
        var _path =G_Path; 
        if($('INPUT_Enable').checked== false){
            AddElements(df, _path+"Enable",0);
        }else if($('INPUT_Enable').checked== true){
            AddElements(df, _path+"Enable",1);
        } 
        AddElements(df, _path+"DestIPv6Address", getValue('DestinationAddress'));
        AddElements(df, _path+"DestPrefixLength",getValue('SubnetMask'));
        AddElements(df, _path+"GatewayIPv6Address",getValue('staticRougingGateway'));
        AddElements(df, _path+"ForwardingMetric",getValue('staticRougingMetrics'));    
    }
    df.submit();    
}

function createTable(){
    var trs = "";
    var index_select  = getValue('selectConnectionName');
    if(index_select!="undefined"){
        var WanConnection = wanConnection[index_select].Name;
    }
    for(i=0;i<staticRoutingList.length;i++){
        if(true){
        var tr = "";	
		if(i%2 == 0)
			tr += "<tr class='OddRowB'>";
		else
				tr += "<tr class='EvenRowB'>";
        tr += "<td scope='col'>"+(i+1)+"</td>";
        if(staticRoutingList[i].Enable == '1')
                {
                    staticRoutingList[i].Status='Enable';
            tr += "<td scope='col'>"+staticRoutingList[i].Status+"</td>";
                }else{
                    staticRoutingList[i].Status='Disable';
            tr += "<td scope='col'>"+staticRoutingList[i].Status+"</td>";
               }
        tr += "<td>"+staticRoutingList[i].DestIPv6Address+"</td>";
        tr += "<td>"+staticRoutingList[i].DestPrefixLength+"</td>";
        tr += "<td>"+staticRoutingList[i].GatewayIPv6Address+"</td>";
        tr += "<td>"+staticRoutingList[i].ForwardingMetric+"</td>";
        tr += "<td>"+staticRoutingList[i].StaticRoute+"</td>";
        tr += "<td>"+staticRoutingList[i].ErrorInfo+"</td>";
        tr += "<td><img name='edit' style='cursor:pointer' src='../../skin/edit.gif' onclick='uiEdit(\"" +staticRoutingList[i].path+"\",\"" +(i)+"\")'><img style='cursor:pointer' src='../../skin/trash.gif' onclick='uiDelete(\"" +staticRoutingList[i].path+ "\")'></td>";                            
              tr += "</tr>";
        trs += tr;             
        }
    }
	
	if(trs == "")
		trs = '<tr class="OddRowB"><td colspan="9">'+getStr('LK_NoRule')+'</td></tr>'
    jQuery("#StaticRoutingList").append(trs);
}
    
function __init()
{
    init();
    createTable();
    if(IsExistedFunction("project_init") == true) 
        project_init(GetCurrentFileName());         

}
</script>
</head>
<body>
<form>
<script>printBeginContent()</script>
<script>SetContentTitle(getStr('LK_StaticRoute'))</script>
<table id='StaticRoutingList' cellspacing="0" cellpadding="0" class="ContentBorder">
<tr class="TitleRow">
	<td langkey="LK_Number"></td>
	<td langkey="LK_Status"></td>
	<td langkey="LK_DestinationAddress"></td>
	<td langkey="LK_Mask"></td>
	<td langkey="LK_Gateway"></td>
	<td langkey="LK_Metrics"></td>
	<td langkey="LK_Type"></td>
	<td langkey="LK_ErrorMessage"></td>
	<td langkey="LK_Action"></td>
</tr>
</table>
<br>
<table cellspacing="0" cellpadding="0" class="ContentTableNoColor">
<tr id="BUTTON_BLOCK" class="spaceLine"><td>&nbsp;</td></tr>
<tr><td><script>PrintTriButton("add",getStr('LK_Add'),"uiAdd()");</script></td></tr>
</table>	
<script>printEndContent()</script>    
</form>
<form method="post" name ="ipv6_rtroutecfgdataform" action="/cgi-bin/setup.cgi?page/advancedsetup/adv_v6staticroute.shtml">
</form>
</body>
</html>
