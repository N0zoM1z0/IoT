
<html>
<head>
<meta HTTP-EQUIV='Pragma' CONTENT='no-cache'>
<meta http-equiv='Content-Type' content='text/html; charset=UTF-8'>
<link rel="stylesheet" rev="stylesheet" href="/css/content.css" type="text/css">
<script language="javascript" src="/js/ajax.js"></script>
<script language="javascript" src="/js/check.js"></script>
<script language="javascript" src="/js/jquery.js"></script>
<script language="javascript" src="/js/t_utils.js"></script>
<script language="javascript" src="/js/init.js"></script>
<script language="javascript" src="/js/tri.js"></script>
<script language='javascript' src='/js/project.js'></script>
<script language="javascript">


var mode_2G = 1; // 2.4G一定存在
var mode_5G = 0;
var LANWLANConfigurationNumberOfEntries = <!--#getsingle_noop "InternetGatewayDevice.LANDevice.1.LANWLANConfigurationNumberOfEntries" -->;

if(LANWLANConfigurationNumberOfEntries == 8)
{
    mode_5G = 1;
}
function __init()
{
    if(IsExistedFunction("project_init") == true) 
        project_init(GetCurrentFileName()); 
}
function parseScan(value)
{
	document.getElementById('inscanning').style.display="none";
    // initional
    jQuery('#ScanTable').html("");
    var sigList = eval(value);
    sigLen = sigList.length;
    var trs = "" +
        '<tr class="TitleRow">' +
            '<td>SSID</td>' +
            '<td>BSSID</td>' +
            '<td>Channel</td>' +
            '<td>Signal(%)</td>' +
            '<td>Security</td>' +
            '<td>Wireless Mode</td>' +
           // '<td>Action</td>' +
        '</tr>';
    jQuery('#ScanTable').append(trs);
    for(var i = 0; i < sigLen; i++)
    {
        if(i%2 == 0)
            trs = '<tr class=OddRowB>';
	else
            trs = '<tr class=EvenRowB>';
        trs += '<td>' + sigList[i].SSID + '</td>'
               +    '<td id="ssidmac' + i + '">' + sigList[i].BSSID + '</td>'
               +    '<td>' + sigList[i].CH + '</td>'
               +    '<td>' + sigList[i].Sig + '</td>'
               +    '<td>' + sigList[i].Sec + '</td>'
               +    '<td>' + sigList[i].Mode + '</td>'
              // +    '<td>' + "Add it to MAC " + '&nbsp;<select onchange="addToMACx(this.value, ' + i + ')"><option value="0">-</option><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option></select></td>'
               +'</tr>';
        jQuery('#ScanTable').append(trs);
    }
}

function uiScanning()
{
    var _url = "/cgi-bin/main.cgi";
    var ajax;
    if(mode_2G == "1" && mode_5G == "0")
        ajax = Ajax.getInstance(_url, "ops=apscan&apscanband=2g" , 0, parseScan);
    else if(mode_2G == "0" && mode_5G == "1")
        ajax = Ajax.getInstance(_url, "ops=apscan&apscanband=5g" , 0, parseScan);
    else if(mode_2G == "1" && mode_5G == "1")
		ajax = Ajax.getInstance(_url, "ops=apscan&apscanband=2g5g" , 0, parseScan);
	else
		return 0;

	document.getElementById('inscanning').style.display="block";
    ajax.get();
}
</script>
</head>
<body>
<form>
<script>printBeginContent()</script>
<br>
<script>SetContentTitle(getStr('LK_WDSScan'))</script>
<table id="ScanTable" cellpadding="0" cellspacing="0" class="ContentBorder">
    <tr class="TitleRow">
        <td>SSID</td>
        <td>BSSID</td>
        <td>Channel</td>
        <td>Signal(%)</td>
        <td>Security</td>
        <td>Wireless Mode</td>
    </tr>
</table>
<table id="inscanning" class="ContentTableNoColor" cellpadding="0" cellspacing="0" style="display:none">
<tr id="BUTTON_BLOCK2" class="spaceLine"><td>&nbsp;</td></tr>
<tr>
	<td>
		<label>In scanning, Please wait for a moment...</label>&nbsp;
	</td>
</tr>
</table>
<table class="ContentTableNoColor" cellpadding="0" cellspacing="0">
<tr id="BUTTON_BLOCK2" class="spaceLine"><td>&nbsp;</td></tr>
<tr>
	<td>
		<script>PrintTriButton("Scan",getStr("LK_WDSScan"),"uiScanning()")</script>&nbsp;
	</td>
</tr>
</table>
<script>printEndContent</script>
</form>
      <form method="post" name="dataform" id="dataform" action="/cgi-bin/setup.cgi?page/advancedsetup/adv_channel_info.shtml">
</form>
  </body>
</html>
